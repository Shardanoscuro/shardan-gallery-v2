<!-- Test build from test-pages-build branch -->
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SharDanOscuro - Galleria d'Arte</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700;800;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000000;
            margin: 0;
            padding: 0;
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            position: relative;
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        /* Rimossi effetti di sfondo per design pulito */

        /* Header */
        .header {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 10;
        }

        .main-title {
            text-align: center;
            padding: 30px 0 20px 0;
            font-size: 3.5rem;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: -0.02em;
        }

        .nav-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px 0;
            gap: 40px;
            flex-wrap: wrap;
        }

        .nav-item {
            color: #ffffff;
            text-decoration: none;
            font-size: 1rem;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        .nav-item.active {
            background: #ffffff;
            color: #000000;
            font-weight: 500;
        }

        /* Gallery Container */
        .gallery-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px 80px 20px;
            position: relative;
            z-index: 10;
        }

        /* Gallery Grid */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            animation: fadeInUp 0.8s ease-out;
        }

        .artwork-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            position: relative;
        }

        .artwork-card.service-card::after {
            content: "SERVIZIO";
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(45deg, #27ae60, #229954);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4);
        }

        .artwork-card.info-card::after {
            content: "INFO";
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
        }

        .artwork-card.work-in-progress::after {
            content: attr(data-progress);
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.4);
        }

        .artwork-card.work-in-progress.reserved::after {
            content: "RISERVATO";
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
        }

        .artwork-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            border-color: rgba(157, 78, 221, 0.5);
        }

        .artwork-image {
            width: 100%;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            border-radius: 20px 20px 0 0;
            background: none !important;
        }

        .artwork-image img {
            width: 100%;
            height: 100%;
            object-fit: contain !important;
            background: #fff !important;
            border-radius: 20px 20px 0 0;
            transition: transform 0.3s ease;
        }

        .artwork-card:hover .artwork-image img {
            transform: scale(1.05);
        }

        .artwork-info {
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .artwork-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #000000;
        }

        .artwork-category {
            color: #666666;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .artwork-price {
            font-size: 1.1rem;
            font-weight: 700;
            color: #000000;
        }

        /* Modal COSMICO */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            z-index: 2000;
            animation: modalFadeIn 0.3s ease;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: 
                linear-gradient(145deg, rgba(26, 10, 46, 0.95) 0%, rgba(22, 33, 62, 0.9) 100%);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(157, 78, 221, 0.5);
            border-radius: 20px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 
                0 0 50px rgba(157, 78, 221, 0.6),
                inset 0 0 30px rgba(157, 78, 221, 0.2);
        }

        .modal-header {
            position: relative;
            height: auto;
            max-height: 80vh;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            overflow: hidden;
            border-radius: 18px 18px 0 0;
        }

        .modal-image {
            width: 100%;
            max-width: 100vw;
            max-height: 80vh;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: 600;
            position: relative;
        }

        .modal-image img {
            max-width: 100%;
            max-height: 80vh;
            width: auto;
            height: auto;
            object-fit: contain;
            display: block;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(157, 78, 221, 0.8);
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 0 20px rgba(157, 78, 221, 0.6);
        }

        .close-btn:hover {
            background: rgba(157, 78, 221, 1);
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(157, 78, 221, 0.8);
        }

        .modal-body {
            padding: 30px;
            color: white;
        }

        .modal-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        .modal-category {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .modal-description {
            font-size: 1.1rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
        }

        .modal-price {
            font-size: 2rem;
            font-weight: 700;
            color: #4ecdc4;
            margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(78, 205, 196, 0.6);
        }

        .contact-btn {
            background: linear-gradient(45deg, #ffd700, #ffa500);
            color: #0a0014;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .contact-btn:hover {
            background: linear-gradient(45deg, #ffa500, #ff8c00);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 165, 0, 0.4);
        }

        /* About Modal COSMICO */
        .about-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            z-index: 2000;
            animation: modalFadeIn 0.4s ease;
        }

        .about-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #000000;
            backdrop-filter: none;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: none;
        }

        .about-header {
            padding: 40px 40px 20px 40px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
        }

        .about-title {
            font-size: 3rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 10px;
            text-shadow: none;
        }

        .about-subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
        }

        .about-body {
            padding: 30px 40px 40px 40px;
            color: white;
        }

        .about-section {
            margin-bottom: 40px;
        }

        .about-section h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: none;
        }

        .about-section p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: rgba(157, 78, 221, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(157, 78, 221, 0.3);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .stat-card:hover {
            background: rgba(157, 78, 221, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(157, 78, 221, 0.3);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #ffd700;
            display: block;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .stat-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .skills-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .skill-tag {
            background: rgba(157, 78, 221, 0.2);
            color: #ffffff;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            border: 1px solid rgba(157, 78, 221, 0.3);
        }

        .close-about {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(157, 78, 221, 0.8);
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 0 20px rgba(157, 78, 221, 0.6);
        }

        .close-about:hover {
            background: rgba(157, 78, 221, 1);
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(157, 78, 221, 0.8);
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 60px 20px;
            color: white;
            font-size: 1.2rem;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(157, 78, 221, 0.3);
            border-top: 3px solid #9d4edd;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px auto;
        }

        /* Animations */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translate(-50%, -60%) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @keyframes cosmic-pulse {
            0%, 100% { 
                transform: scale(1) rotate(0deg);
                opacity: 0.6;
            }
            50% { 
                transform: scale(1.1) rotate(180deg);
                opacity: 0.9;
            }
        }

        @keyframes stellar-twinkle {
            0% { transform: translateY(0px) rotate(0deg); }
            100% { transform: translateY(-20px) rotate(360deg); }
        }

        @keyframes neon-pulse-purple {
            0% { 
                text-shadow: 
                    0 0 5px rgba(157, 78, 221, 0.8),
                    0 0 10px rgba(157, 78, 221, 0.6),
                    0 0 15px rgba(157, 78, 221, 0.4);
            }
            100% { 
                text-shadow: 
                    0 0 10px rgba(157, 78, 221, 1),
                    0 0 20px rgba(157, 78, 221, 0.8),
                    0 0 30px rgba(157, 78, 221, 0.6),
                    0 0 40px rgba(157, 78, 221, 0.4);
            }
        }

        /* Contact Section */
        .contact-section {
            background: #000000;
            backdrop-filter: none;
            border: none;
            border-radius: 20px;
            padding: 60px 20px;
            margin: 60px 20px;
            text-align: center;
            position: relative;
            z-index: 10;
            box-shadow: none;
        }

        .contact-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #ffffff;
            font-weight: 700;
            text-shadow: none;
        }

        .contact-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .contact-item {
            padding: 30px;
            background: #2a2a2a;
            backdrop-filter: none;
            border: none;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .contact-item:hover {
            background: #3a3a3a;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-title {
                font-size: 2.5rem;
                padding: 20px 0 15px 0;
            }

            .nav-bar {
                gap: 20px;
            }

            .nav-item {
                font-size: 0.9rem;
                padding: 6px 12px;
            }

            .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }

            .modal-content, .about-content {
                width: 95%;
                margin: 20px;
            }

            .about-title {
                font-size: 2rem;
            }

            .about-body, .about-header {
                padding: 20px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .modal-header {
                height: 250px;
            }

            .modal-title {
                font-size: 2rem;
            }

            .modal-body {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .main-title {
                font-size: 2rem;
            }

            .nav-bar {
                flex-direction: column;
                gap: 10px;
            }

            .filters {
                gap: 10px;
            }

            .gallery-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 600px) {
            html, body, .cf-modal-neon {
                overflow-x: hidden !important;
                overscroll-behavior-x: none !important;
            }
            .cf-modal-neon, .cf-modal-neon * {
                width: 100% !important;
                max-width: 100vw !important;
                min-width: 0 !important;
                box-sizing: border-box !important;
                overflow-x: hidden !important;
            }
            .cf-modal-neon .cf-slider-nav,
            .cf-modal-neon .cf-progress-dots {
                gap: 6px !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                padding-left: 0 !important;
                padding-right: 0 !important;
            }
            .cf-modal-neon .cf-slider-btn {
                margin-left: 0 !important;
                margin-right: 0 !important;
                min-width: 40px !important;
                max-width: 48px !important;
            }
            body {
                position: relative;
                min-width: 0;
            }
            .header {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                width: 100% !important;
                max-width: 100vw !important;
                z-index: 1000 !important;
                transition: transform 0.35s cubic-bezier(0.4,0,0.2,1) !important;
            }
            .header.hide-navbar {
                transform: translateY(-100%) !important;
                transition: transform 0.35s cubic-bezier(0.4,0,0.2,1) !important;
            }
            .header.show-navbar {
                transform: translateY(0) !important;
                transition: transform 0.35s cubic-bezier(0.4,0,0.2,1) !important;
            }
            body:before {
                content: '';
                position: fixed;
                inset: 0;
                z-index: 0;
                background: inherit;
                filter: blur(16px) brightness(0.7);
                pointer-events: none;
            }
            .cf-modal-neon {
                border-radius: 0 !important;
                width: 100vw !important;
                max-width: 100vw !important;
                min-height: 100vh !important;
                height: 100vh !important;
                margin: 0 !important;
                box-shadow: none !important;
                padding: 0 !important;
                background: transparent !important;
                display: flex;
                flex-direction: column;
                justify-content: flex-start;
                align-items: stretch;
                z-index: 1;
            }
            .cf-modal-slider {
                padding-bottom: 0 !important;
                min-height: 0 !important;
                flex: 1 1 auto;
                display: flex;
                flex-direction: column;
                justify-content: flex-start;
                align-items: stretch;
                background: transparent !important;
                box-shadow: none !important;
            }
            .cf-step-card.step-bg {
                border-radius: 0 !important;
                min-height: unset !important;
                aspect-ratio: 16/9;
                height: auto;
                max-height: 60vw;
                margin: 0 !important;
                box-shadow: none !important;
                background: #000 !important;
            }
            .cf-step-card.step-bg .cf-step-bg-img {
                border-radius: 0 !important;
                aspect-ratio: 16/9;
                width: 100% !important;
                max-width: 100vw !important;
                height: auto;
                min-height: 180px;
                max-height: 60vw;
            }
            .cf-step-card.step-bg .cf-step-content {
                padding: 20px 8px 16px 8px;
                font-size: 1.1rem;
                border-radius: 0 0 0 0;
                background: rgba(0,0,0,0.32);
                box-shadow: none !important;
            }
            .cf-step-card.step-bg .cf-step-title {
                font-size: 1.15rem !important;
                margin-bottom: 10px !important;
            }
            .cf-step-card.step-bg .cf-step-desc {
                font-size: 1.01rem !important;
                -webkit-line-clamp: 6;
            }
            .cf-slider-btn { min-width: 56px; min-height: 56px; font-size: 2.2rem; }
            .cf-progress-dots { gap: 14px; margin: 24px 0 0 0; }
            .cf-dot { width: 18px; height: 18px; }
            .cf-cta-sticky {
                position: relative !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                border-radius: 0 !important;
                margin: 18px 0 0 0 !important;
                min-width: 100vw !important;
                width: 100vw !important;
                box-shadow: none !important;
                font-size: 1.1rem !important;
                padding: 18px 0 !important;
                background: #000 !important;
                color: #fff !important;
                border: 2px solid #fff !important;
                text-shadow: 0 2px 12px #000a;
                z-index: 2;
            }
            .modal-header {
                padding: 0 !important;
                min-height: 0 !important;
                height: 0 !important;
            }
            /* Elimina glow/ombra/gradiente dal contenitore principale */
            .modal-content, .about-content {
                box-shadow: none !important;
                background: transparent !important;
                border: none !important;
            }
            .modal-content {
                width: 100vw;
                max-width: 100vw;
                height: 100vh;
                max-height: 100vh;
                border-radius: 0;
                padding: 0;
            }
            .modal-header {
                max-height: 100vh;
                min-height: 70vh;
                border-radius: 0;
            }
            .modal-image {
                max-width: 100vw;
                max-height: 100vh;
                width: 100vw;
                height: 100vh;
                background: #000;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .modal-image img, #sliderImg {
                max-width: 100vw;
                max-height: 100vh;
                width: auto;
                height: auto;
                object-fit: contain;
                display: block;
                margin: 0 auto;
            }
            #slider button, #prevImg, #nextImg {
                font-size: 2.5rem !important;
                padding: 0 10px;
            }
            #closeLightboxBtn {
                top: 16px;
                right: 16px;
                width: 56px;
                height: 56px;
                font-size: 2.3rem;
                background: rgba(0,0,0,0.7);
            }
        }
        @media (max-width: 480px) {
            .modal-content {
                width: 100vw;
                max-width: 100vw;
                height: 100vh;
                max-height: 100vh;
                border-radius: 0;
                padding: 0;
            }
            .modal-header {
                max-height: 100vh;
                min-height: 70vh;
                border-radius: 0;
            }
            .modal-image {
                max-width: 100vw;
                max-height: 100vh;
                width: 100vw;
                height: 100vh;
                background: #000;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .modal-image img, #sliderImg {
                max-width: 100vw;
                max-height: 100vh;
                width: auto;
                height: auto;
                object-fit: contain;
                display: block;
                margin: 0 auto;
            }
            #closeLightboxBtn {
                top: 10px;
                right: 10px;
                width: 60px;
                height: 60px;
                font-size: 2.5rem;
                background: rgba(0,0,0,0.8);
            }
        }

        /* ... esistente ... */
        .header.hide-navbar {
            transform: translateY(-100%);
            transition: transform 0.35s cubic-bezier(0.4,0,0.2,1);
        }
        .header.show-navbar {
            transform: translateY(0);
            transition: transform 0.35s cubic-bezier(0.4,0,0.2,1);
        }

        .cf-modal-slider { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 60vh; padding: 0 0 120px 0; }
        .cf-step-card { background: linear-gradient(145deg,#181818 0%,#232323 100%); border-radius: 32px; box-shadow: 0 8px 40px rgba(0,0,0,0.7); padding: 56px 24px 48px 24px; max-width: 340px; width: 100%; margin: 0 auto; display: flex; flex-direction: column; align-items: center; transition: box-shadow 0.3s; min-height: 420px; }
        .cf-step-icon { font-size: 100px; margin-bottom: 32px; margin-top: 8px; }
        .cf-step-num { width: 64px; height: 64px; border-radius: 50%; background: #fff; color: #000; font-weight: 900; font-size: 1.7rem; display: flex; align-items: center; justify-content: center; margin-bottom: 24px; box-shadow: 0 2px 12px rgba(157,78,221,0.12); border: 3px solid #9d4edd; position: relative; }
        .cf-step-num.active { background: #9d4edd; color: #fff; border-color: #fff; box-shadow: 0 0 0 4px #9d4edd44; }
        .cf-step-num.completed { background: #4ecdc4; color: #fff; border-color: #fff; }
        .cf-step-title { font-size: 24px; font-weight: 700; color: #fff; text-align: center; margin-bottom: 20px; line-height: 1.2; }
        .cf-step-desc { font-size: 18px; color: #eee; text-align: center; line-height: 1.5; margin-bottom: 0; max-width: 90vw; max-height: 4.2em; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; }
        .cf-slider-nav { display: flex; justify-content: space-between; align-items: center; width: 100%; margin: 40px 0 0 0; }
        .cf-slider-btn { background: #9d4edd; color: #fff; border: none; border-radius: 50%; width: 56px; height: 56px; font-size: 2rem; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: background 0.2s; box-shadow: 0 2px 12px rgba(157,78,221,0.12); }
        .cf-slider-btn:disabled { background: #333; color: #888; cursor: not-allowed; }
        .cf-progress-dots { display: flex; gap: 18px; justify-content: center; margin: 36px 0 0 0; }
        .cf-dot { width: 22px; height: 22px; border-radius: 50%; background: #fff; opacity: 0.3; transition: background 0.2s, opacity 0.2s; border: 3px solid #9d4edd; }
        .cf-dot.active { background: #9d4edd; opacity: 1; }
        .cf-dot.completed { background: #4ecdc4; opacity: 1; border-color: #4ecdc4; }
        .cf-cta-sticky { position: fixed; left: 20px; right: 20px; bottom: 20px; background: linear-gradient(90deg,#9d4edd 0%,#4ecdc4 100%); color: #fff; font-size: 1.1rem; font-weight: 700; border: none; border-radius: 18px; padding: 16px 0; text-align: center; cursor: pointer; z-index: 9999; letter-spacing: 2px; box-shadow: 0 -2px 24px #000a; min-height: 44px; }
        @media (max-width: 600px) { .cf-step-card { padding: 40px 8px 32px 8px; border-radius: 18px; min-height: 340px; max-width: 98vw; } .cf-step-title { font-size: 22px; } .cf-step-desc { font-size: 17px; } .cf-slider-btn { width: 44px; height: 44px; font-size: 1.5rem; } .cf-step-num { width: 48px; height: 48px; font-size: 1.2rem; } .cf-step-icon { font-size: 70px; } .cf-progress-dots { gap: 10px; } .cf-dot { width: 16px; height: 16px; border-width: 2px; } .cf-cta-sticky { font-size: 1rem; border-radius: 12px; padding: 12px 0; min-height: 38px; } }
        .cf-slide-left-in { animation: cfSlideLeftIn 0.22s cubic-bezier(.4,0,.2,1); }
        .cf-slide-right-in { animation: cfSlideRightIn 0.22s cubic-bezier(.4,0,.2,1); }
        .cf-slide-left-out { animation: cfSlideLeftOut 0.22s cubic-bezier(.4,0,.2,1); }
        .cf-slide-right-out { animation: cfSlideRightOut 0.22s cubic-bezier(.4,0,.2,1); }
        @keyframes cfSlideLeftIn { from{opacity:0;transform:translateX(-60px);} to{opacity:1;transform:translateX(0);} }
        @keyframes cfSlideRightIn { from{opacity:0;transform:translateX(60px);} to{opacity:1;transform:translateX(0);} }
        @keyframes cfSlideLeftOut { from{opacity:1;transform:translateX(0);} to{opacity:0;transform:translateX(60px);} }
        @keyframes cfSlideRightOut { from{opacity:1;transform:translateX(0);} to{opacity:0;transform:translateX(-60px);} }

        /* --- MODAL COME FUNZIONA: DESIGN NERO/NEON --- */
        .cf-modal-neon {
          background: #000 !important;
          border-radius: 32px;
          border: 3px solid #fff;
          box-shadow: 0 0 32px 6px #fff, 0 0 0 0 #fff;
          animation: neonPulse 2.2s infinite alternate;
          position: relative;
        }
        @keyframes neonPulse {
          0% { box-shadow: 0 0 32px 6px #fff, 0 0 0 0 #fff; }
          100% { box-shadow: 0 0 48px 12px #fff, 0 0 0 0 #fff; }
        }
        .cf-step-card {
          background: #181818 !important;
          border-radius: 24px !important;
          box-shadow: 0 2px 24px #fff2, 0 0 0 0 #fff0 !important;
          border: 2px solid #222 !important;
        }
        .cf-step-num {
          background: #000 !important;
          color: #fff !important;
          border: 2.5px solid #fff !important;
          box-shadow: 0 0 12px 2px #fff8 !important;
        }
        .cf-step-num.active {
          background: #fff !important;
          color: #000 !important;
          border-color: #fff !important;
          box-shadow: 0 0 18px 4px #fff !important;
        }
        .cf-step-num.completed {
          background: #fff !important;
          color: #000 !important;
          border-color: #fff !important;
          box-shadow: 0 0 10px 2px #fff8 !important;
        }
        .cf-step-title, .cf-step-desc {
          color: #fff !important;
        }
        .cf-slider-btn {
          background: #000 !important;
          color: #fff !important;
          border: 2px solid #fff !important;
          box-shadow: 0 0 8px 1px #fff4 !important;
        }
        .cf-slider-btn:disabled {
          background: #181818 !important;
          color: #888 !important;
          border: 2px solid #444 !important;
          box-shadow: none !important;
        }
        .cf-progress-dots {
          gap: 18px;
        }
        .cf-dot {
          background: #000 !important;
          border: 2.5px solid #fff !important;
          opacity: 1 !important;
          box-shadow: 0 0 8px 1px #fff4 !important;
        }
        .cf-dot.active {
          background: #fff !important;
          border-color: #fff !important;
          box-shadow: 0 0 16px 2px #fff !important;
        }
        .cf-dot.completed {
          background: #fff !important;
          border-color: #fff !important;
          box-shadow: 0 0 8px 1px #fff8 !important;
        }
        .cf-cta-sticky {
          background: #000 !important;
          color: #fff !important;
          border: 2.5px solid #fff !important;
          box-shadow: 0 0 24px 4px #fff, 0 0 0 0 #fff;
          animation: neonPulse 2.2s infinite alternate;
          font-weight: 900 !important;
          letter-spacing: 2px;
          text-shadow: 0 0 8px #fff8;
        }
        @media (max-width: 600px) {
          .cf-modal-neon { border-radius: 0 !important; }
          .cf-step-card { border-radius: 12px !important; }
        }
        @media (max-width: 600px) {
          .cf-modal-neon { border-radius: 0 !important; }
          .cf-step-card { border-radius: 12px !important; min-height: 220px !important; padding: 24px 4px 18px 4px !important; }
          .cf-step-title { font-size: 1.1rem !important; margin-bottom: 10px !important; }
          .cf-step-desc { font-size: 0.98rem !important; }
          .cf-slider-btn { width: 36px !important; height: 36px !important; font-size: 1.1rem !important; }
          .cf-step-num { width: 36px !important; height: 36px !important; font-size: 1rem !important; margin-bottom: 10px !important; }
          .cf-step-icon { font-size: 2.2rem !important; margin-bottom: 12px !important; }
          .cf-modal-slider { padding: 0 0 90px 0 !important; }
          .cf-cta-sticky { font-size: 0.98rem !important; border-radius: 10px !important; padding: 10px 0 !important; min-height: 32px !important; left: 10px !important; right: 10px !important; bottom: 10px !important; }
          .modal-header { padding: 12px 0 0 0 !important; min-height: unset !important; }
        }
        .cf-modal-slider { padding-bottom: 120px !important; }
        .cf-cta-sticky { position: fixed; left: 20px; right: 20px; bottom: 20px; z-index: 9999; }

        .cf-step-card.step-bg {
          position: relative;
          padding: 0 !important;
          overflow: hidden;
          min-height: 420px;
          display: flex;
          flex-direction: column;
          justify-content: flex-end;
          box-shadow: 0 2px 24px #fff2, 0 0 0 0 #fff0 !important;
          border-radius: 24px !important;
          border: 2px solid #222 !important;
          background: none !important;
        }
        .cf-step-card.step-bg .cf-step-bg-img {
          position: absolute;
          inset: 0;
          width: 100%;
          height: 100%;
          object-fit: cover;
          z-index: 1;
          border-radius: 24px !important;
          transition: height 0.2s, width 0.2s;
        }
        .cf-step-card.step-bg .cf-step-bg-overlay {
          position: absolute;
          inset: 0;
          background: linear-gradient(180deg,rgba(0,0,0,0.48) 0%,rgba(0,0,0,0.82) 100%);
          z-index: 2;
          border-radius: 24px !important;
        }
        .cf-step-card.step-bg .cf-step-content {
          position: relative;
          z-index: 3;
          padding: 48px 24px 36px 24px;
          color: #fff;
          text-align: center;
          width: 100%;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: flex-end;
          background: rgba(0,0,0,0.32);
          border-radius: 0 0 24px 24px;
          box-shadow: 0 8px 32px #000a;
        }
        .cf-step-card.step-bg .cf-step-num {
          margin-bottom: 18px;
          margin-top: 0;
          background: rgba(0,0,0,0.7) !important;
          border: 2.5px solid #fff !important;
          color: #fff !important;
          box-shadow: 0 0 12px 2px #fff8 !important;
        }
        .cf-step-card.step-bg .cf-step-icon {
          margin-bottom: 18px;
          font-size: 2.2rem;
          background: rgba(0,0,0,0.5);
          border-radius: 50%;
          padding: 8px 0;
          width: 54px;
          display: inline-block;
        }
        .cf-step-card.step-bg .cf-step-title {
          font-size: 1.4rem;
          font-weight: 700;
          margin-bottom: 12px;
          color: #fff;
          text-shadow: 0 2px 12px #000a;
        }
        .cf-step-card.step-bg .cf-step-desc {
          font-size: 1.08rem;
          color: #fff;
          text-shadow: 0 2px 12px #000a;
          margin-bottom: 0;
          max-width: 90vw;
          max-height: 6.2em;
          overflow: hidden;
          display: -webkit-box;
          -webkit-line-clamp: 4;
          -webkit-box-orient: vertical;
        }
        .cf-slider-btn { min-width: 48px; min-height: 48px; font-size: 2rem; }
        .cf-progress-dots { gap: 18px; }
        .cf-dot { width: 22px; height: 22px; }
        @media (max-width: 600px) {
          .cf-step-card.step-bg {
            border-radius: 12px !important;
            min-height: unset !important;
            aspect-ratio: 16/9;
            height: auto;
            max-height: 60vw;
          }
          .cf-step-card.step-bg .cf-step-bg-img {
            border-radius: 12px !important;
            aspect-ratio: 16/9;
            width: 100% !important;
            max-width: 100vw !important;
            height: auto;
            min-height: 180px;
            max-height: 60vw;
          }
          .cf-step-card.step-bg .cf-step-content {
            padding: 20px 8px 16px 8px;
            font-size: 1.1rem;
            border-radius: 0 0 12px 12px;
          }
          .cf-step-card.step-bg .cf-step-title {
            font-size: 1.15rem !important;
            margin-bottom: 10px !important;
          }
          .cf-step-card.step-bg .cf-step-desc {
            font-size: 1.01rem !important;
            -webkit-line-clamp: 6;
          }
          .cf-slider-btn { min-width: 56px; min-height: 56px; font-size: 2.2rem; }
          .cf-progress-dots { gap: 14px; margin: 24px 0 0 0; }
          .cf-dot { width: 18px; height: 18px; }
        }
        #cf-modal-blur-bg {
          position: absolute;
          inset: 0;
          z-index: 1;
          pointer-events: none;
          background: #000;
          filter: blur(18px) brightness(0.5);
          transition: background 0.3s;
          border-radius: 32px;
        }
        @media (max-width: 600px) {
          #cf-modal-blur-bg { filter: blur(12px) brightness(0.5); border-radius: 0; }
        }
        .cf-modal-neon { position: relative; z-index: 1002 !important; background: transparent !important; }
        .cf-modal-slider, .cf-step-card.step-bg, .cf-step-card.step-bg * { position: relative; z-index: 2; }

        @media (max-width: 600px) {
          .header {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            max-width: 100vw !important;
            z-index: 1000 !important;
            transition: transform 0.35s cubic-bezier(0.4,0,0.2,1) !important;
          }
          .header.hide-navbar {
            transform: translateY(-100%) !important;
            transition: transform 0.35s cubic-bezier(0.4,0,0.2,1) !important;
          }
          .header.show-navbar {
            transform: translateY(0) !important;
            transition: transform 0.35s cubic-bezier(0.4,0,0.2,1) !important;
          }
        }
        @media (max-width: 600px) {
          .cf-modal-neon,
          .cf-modal-slider,
          .cf-step-card.step-bg,
          .cf-step-card.step-bg .cf-step-bg-img,
          .cf-step-card.step-bg .cf-step-content,
          .cf-cta-sticky,
          .cf-progress-dots,
          .cf-slider-nav {
              width: 100% !important;
              max-width: 100vw !important;
              min-width: 0 !important;
              box-sizing: border-box !important;
              overflow-x: hidden !important;
              margin-left: 0 !important;
              margin-right: 0 !important;
              padding-left: 0 !important;
              padding-right: 0 !important;
          }
        }
        @media (max-width: 600px) {
          .cf-modal-neon .cf-modal-slider,
          .cf-modal-neon .cf-step-card.step-bg,
          .cf-modal-neon .cf-step-card.step-bg .cf-step-content,
          .cf-modal-neon .cf-step-card.step-bg .cf-step-bg-img,
          .cf-modal-neon .cf-progress-dots,
          .cf-modal-neon .cf-slider-nav,
          .cf-modal-neon .cf-cta-sticky {
              width: 100% !important;
              max-width: 100vw !important;
              min-width: 0 !important;
              box-sizing: border-box !important;
              overflow-x: hidden !important;
              margin-left: 0 !important;
              margin-right: 0 !important;
              padding-left: 0 !important;
              padding-right: 0 !important;
          }
        }
        @media (max-width: 600px) {
          .cf-modal-neon .cf-cta-sticky {
              position: fixed !important;
              left: 0 !important;
              right: 0 !important;
              bottom: env(safe-area-inset-bottom, 16px) !important;
              margin: 0 auto !important;
              z-index: 9999 !important;
              width: 100vw !important;
              max-width: 100vw !important;
              border-radius: 0 0 0 0 !important;
              font-size: 1.08rem !important;
              padding: 16px 0 !important;
          }
          .cf-step-card.step-bg .cf-step-bg-img {
              object-fit: cover !important;
              max-height: 38vh !important;
              min-height: 120px !important;
              width: 100% !important;
          }
        }
        @media (max-width: 600px) {
          .cf-modal-neon .cf-slider-btn {
              width: 40px !important;
              height: 40px !important;
              font-size: 1.5rem !important;
              padding: 0 !important;
              border-radius: 50% !important;
              display: flex !important;
              align-items: center !important;
              justify-content: center !important;
          }
          .cf-modal-neon .cf-cta-sticky {
              max-width: 95vw !important;
              left: 50% !important;
              transform: translateX(-50%) !important;
              border-radius: 16px !important;
              padding: 12px 0 !important;
              font-size: 1.08rem !important;
              bottom: calc(env(safe-area-inset-bottom, 0) + 80px) !important;
              box-shadow: 0 2px 16px #000a !important;
          }
          .cf-modal-neon .cf-step-card.step-bg .cf-step-content {
              padding-left: 8px !important;
              padding-right: 8px !important;
          }
          .cf-modal-neon .cf-modal-slider {
              padding-left: 8px !important;
              padding-right: 8px !important;
          }
        }
        @media (max-width: 600px) {
          .cf-modal-neon .cf-progress-dots {
              gap: 8px !important;
          }
          .cf-modal-neon .cf-dot {
              width: 16px !important;
              height: 16px !important;
              border-radius: 50% !important;
              border-width: 2px !important;
              box-sizing: border-box !important;
              padding: 0 !important;
              margin: 0 !important;
          }
        }
        @media (max-width: 600px) {
            .nav-bar {
                display: flex !important;
                flex-direction: row !important;
                overflow-x: auto !important;
                white-space: nowrap !important;
                gap: 8px !important;
                padding: 8px 0 !important;
                justify-content: flex-start !important;
                align-items: center !important;
                width: 100vw !important;
                max-width: 100vw !important;
                font-size: 0.98rem !important;
                scrollbar-width: none;
            }
            .nav-bar::-webkit-scrollbar { display: none; }
            .nav-item {
                flex: 0 0 auto !important;
                padding: 6px 12px !important;
                font-size: 0.98rem !important;
                border-radius: 16px !important;
            }
        }
        .cf-home-btn-top {
          position: absolute;
          top: 18px;
          left: 18px;
          z-index: 20;
          background: #222;
          color: #fff;
          border: 2px solid #fff;
          border-radius: 12px;
          font-weight: 700;
          font-size: 1.08rem;
          padding: 10px 22px 10px 16px;
          box-shadow: 0 2px 12px #000a;
          cursor: pointer;
          transition: background 0.2s, color 0.2s;
          display: flex;
          align-items: center;
          gap: 8px;
        }
        .cf-home-btn-top:hover {
          background: #fff;
          color: #222;
        }
        @media (max-width: 600px) {
          .cf-home-btn-top {
            top: 8px;
            left: 8px;
            font-size: 0.98rem;
            padding: 8px 16px 8px 10px;
          }
        }
        @media (max-width: 600px) {
          .gallery-container {
            padding-top: 140px !important;
          }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1 class="main-title">SHARDANOSCURO</h1>
            <nav class="nav-bar">
                <span class="nav-item active" data-category="disponibile">Opere Disponibili</span>
                <span class="nav-item" data-category="venduto">Quadri Venduti</span>
                <span class="nav-item" data-category="work-in-progress">Work in Progress</span>
                <span class="nav-item" data-category="chi-sono">Chi Sono</span>
                <span class="nav-item" data-category="commissioni">Commissioni</span>
                <a href="#contatti" class="nav-item">Contatti</a>
            </nav>
        </div>
    </header>

    <!-- Gallery -->
    <div class="gallery-container">
        <!-- Gallery Grid -->
        <div class="gallery-grid" id="galleryGrid">
            <div class="loading">
                <div class="spinner"></div>
                Caricamento opere d'arte...
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="about-modal" id="aboutModal">
        <div class="about-content">
            <div class="about-header">
                <h2 class="about-title">Shardanoscuro</h2>
                <p class="about-subtitle">Pittore & Content Creator</p>
                <button class="close-about" onclick="closeAboutModal()">&times;</button>
            </div>
            <div class="about-body">
                <div class="about-section">
                    <h3>🎨 La Mia Storia</h3>
                    <p>Ciao! Sono Daniele, meglio conosciuto come Shardanoscuro. La mia passione per la pittura mi ha portato a sviluppare uno stile unico che combina elementi moderni, colori vibranti e composizioni innovative su tela.</p>
                    <p>Ogni mia opera nasce da un'ispirazione particolare e prende vita attraverso pennelli, colori e la magia della pittura tradizionale.</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">500+</span>
                        <span class="stat-label">Opere Create</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">2+</span>
                        <span class="stat-label">Anni di Esperienza</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">50+</span>
                        <span class="stat-label">Opere Vendute</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">100%</span>
                        <span class="stat-label">Soddisfazione</span>
                    </div>
                </div>

                <div class="about-section">
                    <h3>🎨 Il Mio Stile</h3>
                    <p>Le mie opere si caratterizzano per l'uso di colori vibranti, composizioni dinamiche e una tecnica pittorica moderna. Ogni quadro è dipinto a mano su tela con colori acrilici, creando texture e sfumature uniche.</p>
                </div>

                <div class="about-section">
                    <h3>🛠️ Competenze</h3>
                    <div class="skills-list">
                        <span class="skill-tag">Pittura su Tela</span>
                        <span class="skill-tag">Colori Acrilici</span>
                        <span class="skill-tag">Tecniche Miste</span>
                        <span class="skill-tag">Composizione</span>
                        <span class="skill-tag">Teoria del Colore</span>
                        <span class="skill-tag">Ritratti</span>
                        <span class="skill-tag">Arte Astratta</span>
                        <span class="skill-tag">Paesaggi</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Commissions Modal -->
    <div class="about-modal" id="commissionsModal">
        <div class="about-content" style="background:none;box-shadow:none;padding:0;overflow:visible;">
            <div class="modal-overlay" style="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.97);backdrop-filter:blur(30px) contrast(110%);display:flex;align-items:center;justify-content:center;z-index:1000;animation:overlayEmerge 1.5s cubic-bezier(0.25,0.46,0.45,0.94);">
                <div class="modal" style="background:linear-gradient(145deg,#0a0a0a 0%,#1a1a1a 50%,#0a0a0a 100%);border-radius:32px;width:90%;max-width:920px;max-height:90vh;overflow:hidden;position:relative;animation:modalFloat 2s cubic-bezier(0.175,0.885,0.32,1.275);box-shadow:0 0 0 1px rgba(255,255,255,0.03),0 40px 80px rgba(0,0,0,0.9),inset 0 1px 0 rgba(255,255,255,0.05),inset 0 -1px 0 rgba(0,0,0,0.8);border:1px solid rgba(255,255,255,0.02);">
                    <div class="modal-header" style="padding:60px 60px 50px;text-align:center;position:relative;background:linear-gradient(180deg,rgba(255,255,255,0.008) 0%,transparent 100%);border-bottom:1px solid rgba(255,255,255,0.04);">
                        <span class="emoji" style="font-size:5rem;margin-bottom:30px;display:block;filter:drop-shadow(0 0 20px rgba(255,255,255,0.3)) drop-shadow(0 0 40px rgba(255,255,255,0.1));">🎨</span>
                        <h2 style="color:#fff;font-size:3.5rem;font-weight:900;margin-bottom:20px;letter-spacing:-0.04em;line-height:0.9;text-shadow:0 0 40px rgba(255,255,255,0.1);">Come Funziona</h2>
                        <p class="subtitle" style="color:rgba(255,255,255,0.6);font-size:1.4rem;font-weight:300;letter-spacing:0.05em;text-transform:uppercase;">Il percorso verso la tua opera d'arte</p>
                        <button class="close-about close-btn" onclick="closeCommissionsModal()" style="position:absolute;top:30px;right:35px;background:rgba(255,255,255,0.04);border:none;color:rgba(255,255,255,0.4);font-size:1.8rem;cursor:pointer;padding:20px;border-radius:50%;transition:all 0.8s cubic-bezier(0.25,0.46,0.45,0.94);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.06);z-index:10;">&times;</button>
                    </div>
                    <div class="modal-body" style="padding:70px;overflow-y:auto;max-height:calc(90vh - 300px);position:relative;">
                        <div class="process-intro" style="text-align:center;margin-bottom:80px;">
                            <h3 style="color:#fff;font-size:2.8rem;margin-bottom:25px;font-weight:800;letter-spacing:-0.03em;text-shadow:0 0 20px rgba(255,255,255,0.1);">Processo Semplice e Trasparente</h3>
                            <p style="color:rgba(255,255,255,0.5);font-size:1.3rem;line-height:1.7;max-width:700px;margin:0 auto;font-weight:300;">Dalla tua idea alla tela finita in 6 passaggi chiari e lineari. Nessuna complicazione, solo il percorso diretto verso la tua opera d'arte.</p>
                        </div>
                        <div class="process-spiral" style="position:relative;max-width:1000px;margin:0 auto;height:800px;">
                            <div class="process-step" style="position:absolute;width:280px;background:linear-gradient(145deg,rgba(255,255,255,0.02) 0%,rgba(255,255,255,0.005) 100%);border-radius:24px;padding:40px;border:1px solid rgba(255,255,255,0.04);transition:all 1s cubic-bezier(0.25,0.46,0.45,0.94);backdrop-filter:blur(10px) contrast(105%);cursor:pointer;top:50px;left:50%;transform:translateX(-50%);">
                                <div class="step-number" style="width:70px;height:70px;background:linear-gradient(135deg,#fff 0%,rgba(255,255,255,0.95) 100%);color:#000;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:1.6rem;margin:0 auto 30px;box-shadow:0 10px 40px rgba(255,255,255,0.15),inset 0 1px 0 rgba(255,255,255,0.2);position:relative;overflow:hidden;">1</div>
                                <div class="step-icon" style="font-size:3rem;text-align:center;margin-bottom:25px;opacity:0.9;">💡</div>
                                <div class="step-title" style="color:#fff;font-size:1.4rem;font-weight:700;margin-bottom:18px;letter-spacing:-0.02em;text-align:center;line-height:1.3;text-shadow:0 0 10px rgba(255,255,255,0.1);">Contattami con la tua idea</div>
                                <div class="step-description" style="color:rgba(255,255,255,0.6);font-size:1rem;line-height:1.7;text-align:center;font-weight:300;">Dimmi cosa hai in mente, condividi la tua visione creativa. Sarò felice di ascoltare ogni dettaglio per capire esattamente cosa desideri.</div>
                            </div>
                            <div class="process-step" style="position:absolute;width:280px;background:linear-gradient(145deg,rgba(255,255,255,0.02) 0%,rgba(255,255,255,0.005) 100%);border-radius:24px;padding:40px;border:1px solid rgba(255,255,255,0.04);transition:all 1s cubic-bezier(0.25,0.46,0.45,0.94);backdrop-filter:blur(10px) contrast(105%);cursor:pointer;top:150px;right:50px;">
                                <div class="step-number" style="width:70px;height:70px;background:linear-gradient(135deg,#fff 0%,rgba(255,255,255,0.95) 100%);color:#000;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:1.6rem;margin:0 auto 30px;box-shadow:0 10px 40px rgba(255,255,255,0.15),inset 0 1px 0 rgba(255,255,255,0.2);position:relative;overflow:hidden;">2</div>
                                <div class="step-icon" style="font-size:3rem;text-align:center;margin-bottom:25px;opacity:0.9;">🎯</div>
                                <div class="step-title" style="color:#fff;font-size:1.4rem;font-weight:700;margin-bottom:18px;letter-spacing:-0.02em;text-align:center;line-height:1.3;text-shadow:0 0 10px rgba(255,255,255,0.1);">Discutiamo dettagli, colori e dimensioni</div>
                                <div class="step-description" style="color:rgba(255,255,255,0.6);font-size:1rem;line-height:1.7;text-align:center;font-weight:300;">Definiamo insieme tutti gli aspetti del progetto: colori, dimensioni, stile e ogni dettaglio tecnico per essere sicuri di creare quello che vuoi.</div>
                            </div>
                            <div class="process-step" style="position:absolute;width:280px;background:linear-gradient(145deg,rgba(255,255,255,0.02) 0%,rgba(255,255,255,0.005) 100%);border-radius:24px;padding:40px;border:1px solid rgba(255,255,255,0.04);transition:all 1s cubic-bezier(0.25,0.46,0.45,0.94);backdrop-filter:blur(10px) contrast(105%);cursor:pointer;bottom:150px;right:50px;">
                                <div class="step-number" style="width:70px;height:70px;background:linear-gradient(135deg,#fff 0%,rgba(255,255,255,0.95) 100%);color:#000;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:1.6rem;margin:0 auto 30px;box-shadow:0 10px 40px rgba(255,255,255,0.15),inset 0 1px 0 rgba(255,255,255,0.2);position:relative;overflow:hidden;">3</div>
                                <div class="step-icon" style="font-size:3rem;text-align:center;margin-bottom:25px;opacity:0.9;">📋</div>
                                <div class="step-title" style="color:#fff;font-size:1.4rem;font-weight:700;margin-bottom:18px;letter-spacing:-0.02em;text-align:center;line-height:1.3;text-shadow:0 0 10px rgba(255,255,255,0.1);">Ti fornisco un preventivo</div>
                                <div class="step-description" style="color:rgba(255,255,255,0.6);font-size:1rem;line-height:1.7;text-align:center;font-weight:300;">Ricevi un preventivo chiaro e dettagliato, basato sulla complessità e dimensioni dell'opera. Nessuna sorpresa, solo trasparenza.</div>
                            </div>
                            <div class="process-step" style="position:absolute;width:280px;background:linear-gradient(145deg,rgba(255,255,255,0.02) 0%,rgba(255,255,255,0.005) 100%);border-radius:24px;padding:40px;border:1px solid rgba(255,255,255,0.04);transition:all 1s cubic-bezier(0.25,0.46,0.45,0.94);backdrop-filter:blur(10px) contrast(105%);cursor:pointer;bottom:50px;left:50%;transform:translateX(-50%);">
                                <div class="step-number" style="width:70px;height:70px;background:linear-gradient(135deg,#fff 0%,rgba(255,255,255,0.95) 100%);color:#000;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:1.6rem;margin:0 auto 30px;box-shadow:0 10px 40px rgba(255,255,255,0.15),inset 0 1px 0 rgba(255,255,255,0.2);position:relative;overflow:hidden;">4</div>
                                <div class="step-icon" style="font-size:3rem;text-align:center;margin-bottom:25px;opacity:0.9;">🎨</div>
                                <div class="step-title" style="color:#fff;font-size:1.4rem;font-weight:700;margin-bottom:18px;letter-spacing:-0.02em;text-align:center;line-height:1.3;text-shadow:0 0 10px rgba(255,255,255,0.1);">Preparo la tela e inizio gli schizzi</div>
                                <div class="step-description" style="color:rgba(255,255,255,0.6);font-size:1rem;line-height:1.7;text-align:center;font-weight:300;">Comincio il lavoro vero e proprio: preparo accuratamente la tela e realizzo i primi schizzi per definire la composizione.</div>
                            </div>
                            <div class="process-step" style="position:absolute;width:280px;background:linear-gradient(145deg,rgba(255,255,255,0.02) 0%,rgba(255,255,255,0.005) 100%);border-radius:24px;padding:40px;border:1px solid rgba(255,255,255,0.04);transition:all 1s cubic-bezier(0.25,0.46,0.45,0.94);backdrop-filter:blur(10px) contrast(105%);cursor:pointer;bottom:150px;left:50px;">
                                <div class="step-number" style="width:70px;height:70px;background:linear-gradient(135deg,#fff 0%,rgba(255,255,255,0.95) 100%);color:#000;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:1.6rem;margin:0 auto 30px;box-shadow:0 10px 40px rgba(255,255,255,0.15),inset 0 1px 0 rgba(255,255,255,0.2);position:relative;overflow:hidden;">5</div>
                                <div class="step-icon" style="font-size:3rem;text-align:center;margin-bottom:25px;opacity:0.9;">🖌️</div>
                                <div class="step-title" style="color:#fff;font-size:1.4rem;font-weight:700;margin-bottom:18px;letter-spacing:-0.02em;text-align:center;line-height:1.3;text-shadow:0 0 10px rgba(255,255,255,0.1);">Dipingo il tuo quadro strato dopo strato</div>
                                <div class="step-description" style="color:rgba(255,255,255,0.6);font-size:1rem;line-height:1.7;text-align:center;font-weight:300;">Realizzo l'opera con cura e attenzione, lavorando per strati successivi per ottenere la massima qualità e profondità.</div>
                            </div>
                            <div class="process-step" style="position:absolute;width:280px;background:linear-gradient(145deg,rgba(255,255,255,0.02) 0%,rgba(255,255,255,0.005) 100%);border-radius:24px;padding:40px;border:1px solid rgba(255,255,255,0.04);transition:all 1s cubic-bezier(0.25,0.46,0.45,0.94);backdrop-filter:blur(10px) contrast(105%);cursor:pointer;top:150px;left:50px;">
                                <div class="step-number" style="width:70px;height:70px;background:linear-gradient(135deg,#fff 0%,rgba(255,255,255,0.95) 100%);color:#000;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:1.6rem;margin:0 auto 30px;box-shadow:0 10px 40px rgba(255,255,255,0.15),inset 0 1px 0 rgba(255,255,255,0.2);position:relative;overflow:hidden;">6</div>
                                <div class="step-icon" style="font-size:3rem;text-align:center;margin-bottom:25px;opacity:0.9;">🎁</div>
                                <div class="step-title" style="color:#fff;font-size:1.4rem;font-weight:700;margin-bottom:18px;letter-spacing:-0.02em;text-align:center;line-height:1.3;text-shadow:0 0 10px rgba(255,255,255,0.1);">Ricevi il tuo quadro originale pronto da appendere</div>
                                <div class="step-description" style="color:rgba(255,255,255,0.6);font-size:1rem;line-height:1.7;text-align:center;font-weight:300;">L'opera finita ti viene consegnata completamente pronta per essere esposta, firmata e pronta ad abbellire i tuoi spazi.</div>
                            </div>
                        </div>
                        <div class="tech-info" style="background:linear-gradient(135deg,rgba(255,255,255,0.04) 0%,rgba(255,255,255,0.01) 100%);border-radius:28px;padding:50px;margin:100px auto 80px;max-width:700px;border:1px solid rgba(255,255,255,0.06);backdrop-filter:blur(20px) contrast(110%);position:relative;">
                            <h4 style="color:#fff;font-size:1.8rem;margin-bottom:25px;display:flex;align-items:center;justify-content:center;gap:20px;font-weight:800;text-shadow:0 0 15px rgba(255,255,255,0.1);"><span>⚙️</span>Informazioni Tecniche</h4>
                            <p style="color:rgba(255,255,255,0.6);font-size:1.1rem;line-height:1.9;text-align:center;font-weight:300;"><strong>Dimensioni:</strong> 6 passaggi<br><strong>Tecnica:</strong> Dalla idea alla tela<br><strong>Processo:</strong> Semplice e trasparente<br><strong>Risultato:</strong> Quadro originale pronto da appendere</p>
                        </div>
                        <button class="cta-button contact-btn" onclick="contactForCommission()" style="background:linear-gradient(135deg,#fff 0%,rgba(255,255,255,0.98) 100%);color:#000;border:none;padding:28px 70px;border-radius:70px;font-size:1.3rem;font-weight:800;cursor:pointer;width:100%;max-width:500px;margin:0 auto;display:block;transition:all 0.8s cubic-bezier(0.25,0.46,0.45,0.94);box-shadow:0 15px 50px rgba(255,255,255,0.2),inset 0 1px 0 rgba(255,255,255,0.3);text-transform:uppercase;letter-spacing:3px;position:relative;overflow:hidden;">Richiedi Questo Servizio</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Work in Progress Modal -->
    <div class="about-modal" id="workInProgressModal">
        <div class="about-content">
            <div class="about-header">
                <h2 class="about-title">Work in Progress</h2>
                <p class="about-subtitle">Opere in Corso di Realizzazione</p>
                <button class="close-about" onclick="closeWorkInProgressModal()">&times;</button>
            </div>
            <div class="about-body">
                <div class="about-section">
                    <h3>🎨 Quello che Sto Dipingendo</h3>
                    <p>Qui puoi vedere le opere su cui sto attualmente lavorando! Ogni quadro è un viaggio che può durare giorni o settimane, e mi piace condividere con te ogni fase del processo creativo.</p>
                    <p>Seguendo questa sezione puoi prenotare un quadro ancora prima che sia completato!</p>
                </div>

                <div class="about-section">
                    <h3>🖼️ Opere in Corso</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
                        <!-- Work 1 -->
                        <div style="background: rgba(255, 255, 255, 0.95); border-radius: 20px; overflow: hidden; position: relative; cursor: pointer;" onclick="openWorkModal(1)">
                            <div style="position: absolute; top: 15px; right: 15px; background: linear-gradient(45deg, #f39c12, #e67e22); color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; z-index: 10;">
                                85% FATTO
                            </div>
                            <div style="width: 100%; height: 200px; background: linear-gradient(45deg, #ff9a9e, #fecfef); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: 600;">
                                🎨 Simbiosi
                            </div>
                            <div style="padding: 20px; background: rgba(255, 255, 255, 0.95);">
                                <h3 style="font-size: 1.3rem; font-weight: 600; margin-bottom: 8px; color: #000000;">Simbiosi</h3>
                                <div style="color: #666666; font-size: 0.9rem; font-weight: 500; margin-bottom: 12px; text-transform: uppercase;">In Lavorazione</div>
                                <div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">70x50cm • 2024</div>
                                <div style="font-size: 1.1rem; font-weight: 700; color: #000000;">€ 320,00</div>
                            </div>
                        </div>

                        <!-- Work 2 -->
                        <div style="background: rgba(255, 255, 255, 0.95); border-radius: 20px; overflow: hidden; position: relative; cursor: pointer;" onclick="openWorkModal(2)">
                            <div style="position: absolute; top: 15px; right: 15px; background: linear-gradient(45deg, #3498db, #2980b9); color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; z-index: 10;">
                                60% FATTO
                            </div>
                            <div style="width: 100%; height: 200px; background: linear-gradient(45deg, #4facfe, #00f2fe); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: 600;">
                                🌊 Oceano Tempestoso
                            </div>
                            <div style="padding: 20px; background: rgba(255, 255, 255, 0.95);">
                                <h3 style="font-size: 1.3rem; font-weight: 600; margin-bottom: 8px; color: #000000;">Oceano Tempestoso</h3>
                                <div style="color: #666666; font-size: 0.9rem; font-weight: 500; margin-bottom: 12px; text-transform: uppercase;">In Lavorazione</div>
                                <div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">60x80cm • 2024</div>
                                <div style="font-size: 1.1rem; font-weight: 700; color: #000000;">€ 280,00</div>
                            </div>
                        </div>

                        <!-- Work 3 -->
                        <div style="background: #2a2a2a; border-radius: 20px; overflow: hidden; position: relative; cursor: pointer;" onclick="openWorkModal(3)">
                            <div style="position: absolute; top: 15px; right: 15px; background: linear-gradient(45deg, #e74c3c, #c0392b); color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; z-index: 10;">
                                RISERVATO
                            </div>
                            <div style="width: 100%; height: 200px; background: linear-gradient(45deg, #434343, #000000); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: 600;">
                                🌆 Skyline Notturno
                            </div>
                            <div style="padding: 20px; background: #2a2a2a;">
                                <h3 style="font-size: 1.3rem; font-weight: 600; margin-bottom: 8px; color: #ffffff;">Skyline Notturno</h3>
                                <div style="color: #cccccc; font-size: 0.9rem; font-weight: 500; margin-bottom: 12px; text-transform: uppercase;">Commissione</div>
                                <div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">50x70cm • 2024</div>
                                <div style="font-size: 1.1rem; font-weight: 700; color: #ffffff;">Riservato</div>
                            </div>
                        </div>

                        <!-- Work 4 -->
                        <div style="background: #6a4c93; border-radius: 20px; overflow: hidden; position: relative; cursor: pointer;" onclick="openWorkModal(4)">
                            <div style="position: absolute; top: 15px; right: 15px; background: linear-gradient(45deg, #9b59b6, #8e44ad); color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; z-index: 10;">
                                30% FATTO
                            </div>
                            <div style="width: 100%; height: 200px; background: linear-gradient(45deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: 600;">
                                🎭 Ritratto Astratto
                            </div>
                            <div style="padding: 20px; background: #6a4c93;">
                                <h3 style="font-size: 1.3rem; font-weight: 600; margin-bottom: 8px; color: #ffffff;">Ritratto Astratto</h3>
                                <div style="color: #e0e0e0; font-size: 0.9rem; font-weight: 500; margin-bottom: 12px; text-transform: uppercase;">Sperimentazione</div>
                                <div style="color: #cccccc; font-size: 0.9rem; margin-bottom: 5px;">40x60cm • 2024</div>
                                <div style="font-size: 1.1rem; font-weight: 700; color: #ffffff;">€ 250,00</div>
                            </div>
                        </div>

                        <!-- Work 5 -->
                        <div style="background: rgba(255, 255, 255, 0.95); border-radius: 20px; overflow: hidden; position: relative; cursor: pointer;" onclick="openWorkModal(5)">
                            <div style="position: absolute; top: 15px; right: 15px; background: linear-gradient(45deg, #27ae60, #229954); color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; z-index: 10;">
                                QUASI FINITO
                            </div>
                            <div style="width: 100%; height: 200px; background: linear-gradient(45deg, #a8edea, #fed6e3); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: 600;">
                                🌌 Galassia Infinita
                            </div>
                            <div style="padding: 20px; background: rgba(255, 255, 255, 0.95);">
                                <h3 style="font-size: 1.3rem; font-weight: 600; margin-bottom: 8px; color: #000000;">Galassia Infinita</h3>
                                <div style="color: #666666; font-size: 0.9rem; font-weight: 500; margin-bottom: 12px; text-transform: uppercase;">In Lavorazione</div>
                                <div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">80x60cm • 2024</div>
                                <div style="font-size: 1.1rem; font-weight: 700; color: #000000;">€ 380,00</div>
                            </div>
                        </div>

                        <!-- Work 6 -->
                        <div style="background: rgba(255, 255, 255, 0.95); border-radius: 20px; overflow: hidden; position: relative; cursor: pointer;" onclick="openWorkModal(6)">
                            <div style="position: absolute; top: 15px; right: 15px; background: linear-gradient(45deg, #f39c12, #e67e22); color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; z-index: 10;">
                                SKETCH
                            </div>
                            <div style="width: 100%; height: 200px; background: linear-gradient(45deg, #fa709a, #fee140); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: 600;">
                                💫 Energia Cosmica
                            </div>
                            <div style="padding: 20px; background: rgba(255, 255, 255, 0.95);">
                                <h3 style="font-size: 1.3rem; font-weight: 600; margin-bottom: 8px; color: #000000;">Energia Cosmica</h3>
                                <div style="color: #666666; font-size: 0.9rem; font-weight: 500; margin-bottom: 12px; text-transform: uppercase;">Nuovo Progetto</div>
                                <div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">50x50cm • 2024</div>
                                <div style="font-size: 1.1rem; font-weight: 700; color: #000000;">€ 200,00</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="about-section">
                    <h3>📺 Seguimi in Diretta</h3>
                    <p>Vuoi vedere come nascono questi quadri? Seguimi su Twitch durante le mie sessioni di pittura! Dipingo spesso in diretta e rispondo alle domande della chat mentre lavoro.</p>
                    <p>È il modo migliore per vedere l'evoluzione delle opere e prenotare quella che ti piace di più!</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">6</span>
                        <span class="stat-label">Opere in Corso</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">2</span>
                        <span class="stat-label">Commissioni Attive</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">2</span>
                        <span class="stat-label">Esperimenti Nuovi</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">Live</span>
                        <span class="stat-label">Aggiornamenti</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Artwork Modal -->
    <div class="modal" id="artworkModal">
        <div class="modal-content" id="artworkModalContent">
            <!-- Il contenuto verrà sostituito dinamicamente per la card 'Come Funziona' -->
        </div>
    </div>

    <!-- Contact Section -->
    <div class="contact-section" id="contatti">
        <h2 class="contact-title">Contattami</h2>
        <p style="font-size: 1.2rem; margin-bottom: 40px; color: rgba(255, 255, 255, 0.8);">Interessato a una delle mie opere? Scrivimi!</p>
        
        <div class="contact-info" style="grid-template-columns: repeat(2, 1fr); max-width: 600px;">
            <div class="contact-item">
                <div style="font-size: 2rem; margin-bottom: 15px;">📱</div>
                <h3 style="color: #ffffff; margin-bottom: 10px;">WhatsApp</h3>
                <p style="color: rgba(255, 255, 255, 0.8);">+39 351 907 0827</p>
            </div>
            
            <div class="contact-item">
                <div style="font-size: 2rem; margin-bottom: 15px;">🎮</div>
                <h3 style="color: #ffffff; margin-bottom: 10px;">Twitch</h3>
                <p style="color: rgba(255, 255, 255, 0.8);">twitch.tv/shardan_oscuro</p>
            </div>
        </div>
    </div>

    <div class="modal" id="artworkLightbox" style="display:none;z-index:3000;background:rgba(0,0,0,0.98);">
        <button id="closeLightboxBtn" style="position:absolute;top:24px;right:24px;z-index:10;width:48px;height:48px;background:rgba(0,0,0,0.5);border:none;border-radius:50%;font-size:2rem;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background 0.2s;outline:none;">&times;</button>
        <div id="lightboxContent" style="width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;"></div>
    </div>

    <script>
        // Global variables
        let allArtworks = [];
        let filteredArtworks = [];
        let currentArtwork = null;

        // Sample data con opere di esempio
        const sampleArtworks = [
            {
                id: 1,
                title: "Flowing Souls",
                category: "venduto",
                description: "Dipinto ad acrilico su tela, quest'opera cattura l'essenza dell'incontro tra elementi opposti. Le pennellate fluide creano un movimento perpetuo, dove due anime danzano in un equilibrio perfetto tra calore e freddezza, passione e calma.",
                price: "€ 280,00 (VENDUTO)",
                priceValue: 280,
                year: 2024,
                dimensions: "50x70cm",
                technique: "Acrilici su tela",
                image: "FlowingSouls-ambiente.jpg",
                gradient: "linear-gradient(45deg, #ff6b6b, #4ecdc4)",
                soldDate: "2024"
            },
            {
                id: 7,
                title: "Metropoli Notturna",
                category: "venduto",
                description: "Una città che non dorme mai, immortalata nei suoi colori notturni. Luci al neon si riflettono sull'asfalto bagnato creando un'atmosfera cinematografica.",
                price: "€ 180,00 (VENDUTO)",
                priceValue: 180,
                year: 2024,
                dimensions: "50x60cm",
                technique: "Acrilici su tela",
                image: null,
                gradient: "linear-gradient(45deg, #434343, #000000)",
                soldDate: "2024",
                hidden: true
            },
            {
                id: 8,
                title: "Digital Dreams",
                category: "venduto",
                description: "Un viaggio attraverso paesaggi digitali onirici, dove la realtà si fonde con l'immaginazione in un'esplosione di colori cyber.",
                price: "€ 320,00 (VENDUTO)",
                priceValue: 320,
                year: 2024,
                dimensions: "70x50cm",
                technique: "Acrilici su tela",
                image: null,
                gradient: "linear-gradient(45deg, #667eea, #764ba2)",
                soldDate: "2024",
                hidden: true
            },
            {
                id: 9,
                title: "Energia Vitale",
                category: "venduto",
                description: "Rappresentazione dell'energia che scorre attraverso ogni forma di vita, catturata in pennellate dinamiche e colori pulsanti.",
                price: "€ 195,00 (VENDUTO)",
                priceValue: 195,
                year: 2023,
                dimensions: "60x40cm",
                technique: "Acrilici su tela",
                image: null,
                gradient: "linear-gradient(45deg, #fa709a, #fee140)",
                soldDate: "2023",
                hidden: true
            },
            // Work in Progress - opere in corso
            {
                id: 10,
                title: "Simbiosi",
                category: "work-in-progress",
                description: "Tu il mio respiro, io il tuo battito, la mia vita esiste solo quando ci tocchiamo. Un'opera che esplora l'interconnessione tra anime gemelle attraverso colori delicati e forme fluide.",
                price: "€ 320,00",
                priceValue: 320,
                year: 2024,
                dimensions: "70x50cm",
                technique: "Acrilici su tela",
                images: [
                  "work-in-progress/simbiosi-1.jpg",
                  "work-in-progress/simbiosi-2.jpg"
                ],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)",
                progress: "85% completato",
                estimatedTime: "3-4 giorni"
            },
            {
                id: 12,
                title: "Skyline Notturno",
                category: "work-in-progress",
                description: "Una vista notturna di una città moderna con luci colorate e riflessi sui grattacieli. Quest'opera è una commissione privata attualmente in fase di sviluppo dello sfondo.",
                price: "Riservato",
                priceValue: 0,
                year: 2024,
                dimensions: "50x70cm",
                technique: "Acrilici su tela",
                image: null,
                gradient: "linear-gradient(45deg, #434343, #000000)",
                progress: "Commissione riservata",
                estimatedTime: "2-3 settimane",
                isReserved: true,
                hidden: true
            },
            {
                id: 13,
                title: "Ritratto Astratto",
                category: "work-in-progress",
                description: "Un esperimento con volti stilizzati e colori vivaci. Sto esplorando nuove tecniche per rappresentare l'essenza umana attraverso forme geometriche e pennellate espressive.",
                price: "€ 250,00",
                priceValue: 250,
                year: 2024,
                dimensions: "40x60cm",
                technique: "Mista su tela",
                image: null,
                gradient: "linear-gradient(45deg, #667eea, #764ba2)",
                progress: "30% completato",
                estimatedTime: "2-3 settimane",
                hidden: true
            },
            {
                id: 14,
                title: "Galassia Infinita",
                category: "work-in-progress",
                description: "Un viaggio attraverso l'universo rappresentato con colori cosmici e stelle scintillanti. Quasi completata, mancano solo gli ultimi dettagli stellari e le finiture luminose.",
                price: "€ 380,00",
                priceValue: 380,
                year: 2024,
                dimensions: "80x60cm",
                technique: "Acrilici su tela",
                image: null,
                gradient: "linear-gradient(45deg, #a8edea, #fed6e3)",
                progress: "95% completato",
                estimatedTime: "2-3 giorni",
                hidden: true
            },
            {
                id: 15,
                title: "Energia Cosmica",
                category: "work-in-progress",
                description: "Un nuovo progetto che esplora l'energia che permea l'universo. Attualmente in fase di sketch e studio dei colori, rappresenterà il flusso energetico attraverso forme dinamiche.",
                price: "€ 200,00",
                priceValue: 200,
                year: 2024,
                dimensions: "50x50cm",
                technique: "Acrilici su tela",
                image: null,
                gradient: "linear-gradient(45deg, #fa709a, #fee140)",
                progress: "Fase di sketch",
                estimatedTime: "3-4 settimane",
                hidden: true
            },
            // Chi Sono - sezioni informative
            {
                id: 16,
                title: "La Mia Storia",
                category: "chi-sono",
                description: "Ciao! Sono Daniele, meglio conosciuto come Shardanoscuro. La mia passione per la pittura mi ha portato a sviluppare uno stile unico che combina elementi moderni, colori vibranti e composizioni innovative su tela. Ogni mia opera nasce da un'ispirazione particolare e prende vita attraverso pennelli, colori e la magia della pittura tradizionale.",
                price: "Pittore & Content Creator",
                priceValue: 0,
                year: 2024,
                dimensions: "La mia storia",
                technique: "Passione e creatività",
                image: null,
                gradient: "linear-gradient(45deg, #667eea, #764ba2)",
                isInfo: true
            },
            {
                id: 17,
                title: "Il Mio Stile",
                category: "chi-sono",
                description: "Le mie opere si caratterizzano per l'uso di colori vibranti, composizioni dinamiche e una tecnica pittorica moderna. Ogni quadro è dipinto a mano su tela con colori acrilici, creando texture e sfumature uniche che catturano l'essenza dell'arte contemporanea.",
                price: "Arte Moderna",
                priceValue: 0,
                year: 2024,
                dimensions: "Stile artistico",
                technique: "Acrilici su tela",
                image: null,
                gradient: "linear-gradient(45deg, #f093fb, #f5576c)",
                isInfo: true,
                hidden: true
            },
            {
                id: 18,
                title: "500+ Opere Create",
                category: "chi-sono",
                description: "In oltre 2 anni di attività artistica ho realizzato più di 500 opere, ognuna con la sua storia e il suo carattere unico. Ogni dipinto rappresenta un momento creativo irripetibile.",
                price: "Statistica",
                priceValue: 0,
                year: 2024,
                dimensions: "Opere realizzate",
                technique: "Creatività continua",
                image: null,
                gradient: "linear-gradient(45deg, #4facfe, #00f2fe)",
                isInfo: true,
                hidden: true
            },
            {
                id: 19,
                title: "50+ Opere Vendute",
                category: "chi-sono",
                description: "Sono orgoglioso di aver venduto oltre 50 opere a collezionisti e appassionati d'arte. Ogni vendita rappresenta una connessione speciale tra l'artista e chi apprezza il mio lavoro.",
                price: "Successo",
                priceValue: 0,
                year: 2024,
                dimensions: "Vendite realizzate",
                technique: "Soddisfazione garantita",
                image: null,
                gradient: "linear-gradient(45deg, #a8edea, #fed6e3)",
                isInfo: true,
                hidden: true
            },
            {
                id: 20,
                title: "Le Mie Competenze",
                category: "chi-sono",
                description: "Sono specializzato in diverse tecniche pittoriche: Pittura su Tela, Colori Acrilici, Tecniche Miste, Composizione, Teoria del Colore, Ritratti, Arte Astratta e Paesaggi. Ogni tecnica mi permette di esprimere aspetti diversi della mia creatività.",
                price: "Competenze",
                priceValue: 0,
                year: 2024,
                dimensions: "Tecniche artistiche",
                technique: "Formazione continua",
                image: null,
                gradient: "linear-gradient(45deg, #fa709a, #fee140)",
                isInfo: true,
                hidden: true
            },
            {
                id: 21,
                title: "2+ Anni di Esperienza",
                category: "chi-sono",
                description: "Da oltre 2 anni mi dedico professionalmente alla pittura, perfezionando costantemente le mie tecniche e sperimentando nuovi stili. Ogni giorno è un'opportunità per crescere come artista.",
                price: "Esperienza",
                priceValue: 0,
                year: 2024,
                dimensions: "Anni di attività",
                technique: "Crescita artistica",
                image: null,
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)",
                isInfo: true,
                hidden: true
            },
            // Commissioni - servizi offerti
            {
                id: 22,
                title: "Come Funziona",
                category: "commissioni",
                description: "Il processo è semplice e trasparente: 1) Contattami con la tua idea, 2) Discutiamo dettagli, colori e dimensioni, 3) Ti fornisco un preventivo, 4) Preparo la tela e inizio gli schizzi, 5) Dipingo il tuo quadro strato dopo strato, 6) Ricevi il tuo quadro originale pronto da appendere.",
                price: "Processo Semplice",
                priceValue: 0,
                year: 2024,
                dimensions: "6 passaggi",
                technique: "Dalla idea alla tela",
                image: null,
                gradient: "linear-gradient(45deg, #667eea, #764ba2)",
                isService: true
            },
            {
                id: 23,
                title: "Ritratti su Tela",
                category: "commissioni",
                description: "Realizzo ritratti personalizzati su tela con colori acrilici. Ogni ritratto cattura l'essenza della persona con il mio stile artistico unico. Perfetti per regali speciali o per immortalare momenti importanti.",
                price: "€100-400",
                priceValue: 250,
                year: 2024,
                dimensions: "Varie dimensioni",
                technique: "Acrilici su tela",
                image: null,
                gradient: "linear-gradient(45deg, #f093fb, #f5576c)",
                isService: true,
                hidden: true
            },
            {
                id: 24,
                title: "Paesaggi Personalizzati",
                category: "commissioni",
                description: "Dipingo paesaggi su commissione: dalla tua foto di viaggio preferita a paesaggi immaginari. Ogni paesaggio è interpretato con il mio stile moderno e colori vibranti.",
                price: "€150-350",
                priceValue: 250,
                year: 2024,
                dimensions: "Varie dimensioni",
                technique: "Acrilici su tela",
                image: null,
                gradient: "linear-gradient(45deg, #4facfe, #00f2fe)",
                isService: true,
                hidden: true
            },
            {
                id: 25,
                title: "Arte Astratta",
                category: "commissioni",
                description: "Creo opere astratte personalizzate basate sui tuoi colori preferiti, emozioni o concetti. Perfette per arredare casa o ufficio con un tocco artistico unico e moderno.",
                price: "€100-300",
                priceValue: 200,
                year: 2024,
                dimensions: "Varie dimensioni",
                technique: "Acrilici su tela",
                image: null,
                gradient: "linear-gradient(45deg, #a8edea, #fed6e3)",
                isService: true,
                hidden: true
            },
            {
                id: 26,
                title: "Copie d'Autore",
                category: "commissioni",
                description: "Realizzo copie di opere famose reinterpretate con il mio stile personale. Un modo per avere un capolavoro unico nella tua casa, con la mia interpretazione artistica.",
                price: "€200-500",
                priceValue: 350,
                year: 2024,
                dimensions: "Varie dimensioni",
                technique: "Acrilici su tela",
                image: null,
                gradient: "linear-gradient(45deg, #fa709a, #fee140)",
                isService: true,
                hidden: true
            },
            {
                id: 27,
                title: "Tempi e Prezzi",
                category: "commissioni",
                description: "Consegna in 3-7 giorni, 2 revisioni incluse, 100% soddisfazione garantita. Piccole tele: €100-200, Medie tele: €200-400, Grandi tele: €400+. Ogni commissione include supporto originale su tela di qualità.",
                price: "Info Pricing",
                priceValue: 0,
                year: 2024,
                dimensions: "3-7 giorni",
                technique: "Qualità garantita",
                image: null,
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)",
                isService: true,
                hidden: true
            },
            {
                id: 16,
                title: "Work in Progress 1",
                category: "work-in-progress",
                description: "Opera in lavorazione. Titolo da definire.",
                price: "-",
                priceValue: 0,
                year: 2024,
                dimensions: "-",
                technique: "-",
                images: ["work-in-progress/IMG_1300.jpg"],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)",
                progress: "Inizio",
                estimatedTime: "-"
            },
            {
                id: 17,
                title: "Work in Progress 2",
                category: "work-in-progress",
                description: "Opera in lavorazione. Titolo da definire.",
                price: "-",
                priceValue: 0,
                year: 2024,
                dimensions: "-",
                technique: "-",
                images: ["work-in-progress/IMG_1306.jpg"],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)",
                progress: "Inizio",
                estimatedTime: "-"
            },
            {
                id: 18,
                title: "Work in Progress 3",
                category: "work-in-progress",
                description: "Opera in lavorazione. Titolo da definire.",
                price: "-",
                priceValue: 0,
                year: 2024,
                dimensions: "-",
                technique: "-",
                images: ["work-in-progress/IMG_1231.jpg"],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)",
                progress: "Inizio",
                estimatedTime: "-"
            },
            {
                id: 19,
                title: "Refuge",
                category: "disponibile",
                description: "Acrilico su tela\nIn questa suggestiva composizione ad acrilico, l'artista cattura un momento di profonda intimità tra terra e cielo. Pennellate audaci si annidano in un abbraccio protettivo, rivelando le silhouette di un uomo e una donna unite in un gesto di tenerezza infinita.\nL'opera parla del nostro bisogno primordiale di santuario—quello spazio sacro dove la vita persiste e fiorisce nonostante la vastità del mondo oltre. Il magistrale uso degli acrilici da parte dell'artista crea un paesaggio tattile dove ogni pennellata sembra respirare di vita organica. La massa dorata che corona le figure si rivela nella sua duplice natura: i capelli luminosi della donna che si fondono simbolicamente con il sole stesso, creando un'aureola di luce e calore che illumina l'intimità dell'abbraccio.\nQuest'opera invita alla contemplazione di temi quali protezione, crescita e l'eterna danza tra vulnerabilità e forza. L'amore umano diventa rifugio primordiale, dove due anime si fondono sotto un cielo infinito, trovando nel loro abbraccio la forza per affrontare l'immensità del mondo.\nUna celebrazione dell'amore come santuario, \"Refuge\" ci ricorda che a volte il nostro rifugio più sicuro è l'abbraccio di chi amiamo.",
                price: "€ 230,00",
                priceValue: 230,
                year: 2024,
                dimensions: "",
                technique: "Acrilico su tela",
                images: ["opere-disponibili/IMG_0131.jpg", "opere-disponibili/Refuge1.JPG"],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)"
            },
            {
                id: 20,
                title: "Opera Disponibile 2",
                category: "disponibile",
                description: "",
                price: "",
                priceValue: 0,
                year: 2024,
                dimensions: "",
                technique: "",
                images: ["opere-disponibili/IMG_0974.HEIC"],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)",
                hidden: true
            },
            {
                id: 21,
                title: "Opera Disponibile 3",
                category: "disponibile",
                description: "",
                price: "",
                priceValue: 0,
                year: 2024,
                dimensions: "",
                technique: "",
                images: ["opere-disponibili/IMG_1308.jpg"],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)"
            },
            {
                id: 22,
                title: "Opera Disponibile 4",
                category: "disponibile",
                description: "",
                price: "",
                priceValue: 0,
                year: 2024,
                dimensions: "",
                technique: "",
                images: ["opere-disponibili/IMG_1309.jpg"],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)"
            },
            {
                id: 23,
                title: "Opera Disponibile 5",
                category: "disponibile",
                description: "",
                price: "",
                priceValue: 0,
                year: 2024,
                dimensions: "",
                technique: "",
                images: ["opere-disponibili/IMG_1310.jpg"],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)"
            },
            {
                id: 24,
                title: "Opera Disponibile 6",
                category: "disponibile",
                description: "",
                price: "",
                priceValue: 0,
                year: 2024,
                dimensions: "",
                technique: "",
                images: ["opere-disponibili/IMG_1311.jpg"],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)",
                hidden: true
            },
            {
                id: 25,
                title: "Opera Disponibile 7",
                category: "disponibile",
                description: "",
                price: "",
                priceValue: 0,
                year: 2024,
                dimensions: "",
                technique: "",
                images: ["opere-disponibili/IMG_1312.jpg"],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)"
            },
            {
                id: 24,
                title: "Storm of Love",
                category: "disponibile",
                description: "Questa è l'arte che parla direttamente al cuore: non descrive l'amore, lo incarna. Ogni pennellata vibra di energia emotiva, ogni colore pulsa di vita vissuta. L'artista trasforma la tela in un campo di battaglia dove vulnerabilità e forza si fondono in un'unica, travolgente sinfonia visiva.\n\"Storm of Love\" ci ricorda che l'amore vero non è mai calmo - è tempesta, è fuoco, è la forza che muove le stelle e fa tremare la terra sotto i nostri piedi.",
                price: "€ 260,00",
                priceValue: 260,
                year: 2024,
                dimensions: "",
                technique: "",
                images: ["opere-disponibili/IMG_1311.jpg"],
                gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)"
            }
        ];

        // Load artworks
        function loadArtworks() {
            allArtworks = sampleArtworks;
            // Inizializza con opere disponibili
            filteredArtworks = allArtworks.filter(artwork => artwork.category === 'disponibile');
            renderGallery();
        }

        // Render gallery
        function renderGallery() {
            const gallery = document.getElementById('galleryGrid');
            
            if (!filteredArtworks || filteredArtworks.length === 0) {
                const activeCategory = document.querySelector('.nav-item.active').dataset.category;
                const emptyMessage = getEmptyMessage(activeCategory);
                
                gallery.innerHTML = `
                    <div class="loading">
                        <div style="font-size: 3rem; margin-bottom: 20px;">🎨</div>
                        ${emptyMessage}
                    </div>
                `;
                return;
            }

            gallery.innerHTML = '';

            filteredArtworks.filter(artwork => !artwork.hidden).forEach((artwork, index) => {
                const card = document.createElement('div');
                let cardClasses = 'artwork-card';
                if (artwork.category === 'venduto') {
                    cardClasses += ' sold';
                } else if (artwork.category === 'work-in-progress') {
                    cardClasses += ' work-in-progress';
                    if (artwork.isReserved) {
                        cardClasses += ' reserved';
                    }
                } else if (artwork.category === 'chi-sono') {
                    cardClasses += ' info-card';
                } else if (artwork.category === 'commissioni') {
                    cardClasses += ' service-card';
                }
                card.className = cardClasses;
                
                // Add progress data attribute for work-in-progress items
                if (artwork.category === 'work-in-progress' && artwork.progress && !artwork.isReserved) {
                    card.setAttribute('data-progress', artwork.progress.toUpperCase());
                }
                
                // --- CLICK SULLA CARD: gestione speciale per Come Funziona ---
                if (artwork.category === 'commissioni' && artwork.title === 'Come Funziona') {
                    card.onclick = () => openModal(artwork);
                } else {
                    card.onclick = (e) => {
                        if (e.target.classList.contains('artwork-image') || e.target.classList.contains('artwork-img-el')) return;
                        openModal(artwork);
                    };
                }
                
                let cardContent = '';
                // Card Come Funziona: sfondo immagine
                if (artwork.category === 'commissioni' && artwork.title === 'Come Funziona') {
                    cardContent += `
                        <div class="artwork-image" style="background: url('images/esempio1.png') center center/cover no-repeat !important; position: relative; height: 220px; min-height: 220px; border-top: 2px solid #fff; border: 2px solid red;">
                            <div style="position:absolute;inset:0;background:rgba(0,0,0,0.10);border-radius:20px 20px 0 0;"></div>
                            <span style="position:relative;z-index:2;display:flex;align-items:center;gap:8px;font-size:1.3rem;color:#fff;font-weight:700;padding:18px 20px;">Come Funziona</span>
                        </div>
                    `;
                } else if ((artwork.images && artwork.images.length > 0) || artwork.image) {
                    cardContent += `
                        <div class="artwork-image" style="cursor:${artwork.images&&artwork.images.length>0?'zoom-in':'pointer'};" ${artwork.images&&artwork.images.length>0?'tabindex=\"0\"':''}>
                            ${artwork.images && artwork.images.length > 0 ? `<img src=\"images/${artwork.images[0]}\" alt=\"${artwork.title}\" loading=\"lazy\" class=\"artwork-img-el\">` : `<img src=\"images/${artwork.image}\" alt=\"${artwork.title}\" loading=\"lazy\" class=\"artwork-img-el\">`}
                        </div>
                    `;
                } else {
                    cardContent += `
                        <div class="artwork-image" style="background: #f5f5f5; color: #bbb;">🎨 ${artwork.title}</div>
                    `;
                }
                
                cardContent += `
                    <div class="artwork-info">
                        <h3 class="artwork-title">${artwork.title}</h3>
                        <div class="artwork-category">${getCategoryName(artwork.category)}</div>
                        ${artwork.dimensions ? `<div style="color: #999; font-size: 0.9rem; margin-bottom: 5px;">${artwork.dimensions} • ${artwork.year}</div>` : ''}
                        <div class="artwork-price" style="display:flex;align-items:center;gap:10px;">
                          ${artwork.price}
                          ${artwork.category==='disponibile'?`<button class='buy-btn' style='background:linear-gradient(45deg,#ffd700,#ffa500);color:#000;border:none;padding:6px 18px;border-radius:16px;font-size:0.98rem;font-weight:700;cursor:pointer;transition:all 0.2s;'>Acquista</button>`:''}
                        </div>
                    </div>
                `;
                
                card.innerHTML = cardContent;
                
                // --- CLICK SULL'IMMAGINE: lightbox solo se NON è Come Funziona ---
                const imgDiv = card.querySelector('.artwork-image');
                if (!(artwork.category === 'commissioni' && artwork.title === 'Come Funziona') && imgDiv) {
                    if (artwork.images && artwork.images.length > 0) {
                        imgDiv.onclick = (e) => { e.stopPropagation(); openLightbox(artwork, 0); };
                        imgDiv.onkeydown = (e) => { if(e.key==='Enter'||e.key===' '){ e.preventDefault(); openLightbox(artwork,0); } };
                    } else if (artwork.image) {
                        imgDiv.onclick = (e) => { e.stopPropagation(); openLightbox({ ...artwork, images: [artwork.image] }, 0); };
                        imgDiv.onkeydown = (e) => { if(e.key==='Enter'||e.key===' '){ e.preventDefault(); openLightbox({ ...artwork, images: [artwork.image] },0); } };
                    }
                }
                
                // --- CLICK SUL BOTTONE ACQUISTA ---
                if (artwork.category === 'disponibile') {
                  setTimeout(() => {
                    const buyBtn = card.querySelector('.buy-btn');
                    if (buyBtn) {
                      buyBtn.onclick = (e) => {
                        e.stopPropagation();
                        const message = `Ciao! Sono interessato all'opera \"${artwork.title}\" (${artwork.price}). Potresti darmi maggiori informazioni?`;
                        const whatsappUrl = `https://wa.me/393519070827?text=${encodeURIComponent(message)}`;
                        window.open(whatsappUrl, '_blank');
                      };
                    }
                  }, 0);
                }
                
                gallery.appendChild(card);
            });
        }

        // Get category display name
        function getCategoryName(category) {
            const categories = {
                'disponibile': 'Disponibile',
                'venduto': 'Venduto',
                'work-in-progress': 'In Lavorazione',
                'chi-sono': 'Informazioni',
                'commissioni': 'Servizio',
                'collezione-privata': 'Collezione Privata'
            };
            return categories[category] || category;
        }

        // Get empty message based on category
        function getEmptyMessage(category) {
            const messages = {
                'venduto': '🎨 Nessun quadro venduto da mostrare al momento',
                'work-in-progress': '🎨 Nessuna opera in corso al momento',
                'chi-sono': '📋 Nessuna informazione disponibile al momento',
                'commissioni': '🎨 Nessun servizio disponibile al momento',
                'disponibile': '🎨 Nessuna opera disponibile al momento'
            };
            return messages[category] || '🎨 Nessuna opera trovata';
        }

        // Filter functions
        function filterByCategory(category) {
            if (category === 'all') {
                filteredArtworks = [...allArtworks];
            } else {
                filteredArtworks = allArtworks.filter(artwork => artwork.category === category);
            }
            renderGallery();
        }

        function filterByPrice(priceRange) {
            let filtered = [...allArtworks];
            
            // Apply category filter first
            const activeCategory = document.querySelector('.nav-item.active').dataset.category;
            if (activeCategory && activeCategory !== 'all') {
                filtered = filtered.filter(artwork => artwork.category === activeCategory);
            }
            
            // Apply price filter
            if (priceRange !== 'all') {
                filtered = filtered.filter(artwork => {
                    const price = artwork.priceValue || 0;
                    switch (priceRange) {
                        case 'low': return price < 200;
                        case 'medium': return price >= 200 && price <= 500;
                        case 'high': return price > 500;
                        default: return true;
                    }
                });
            }
            
            filteredArtworks = filtered;
            renderGallery();
        }

        // Search function
        function searchArtworks() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            if (!searchTerm) {
                // Reset to current category
                const activeCategory = document.querySelector('.nav-item.active').dataset.category;
                filterByCategory(activeCategory || 'all');
                return;
            }
            
            filteredArtworks = allArtworks.filter(artwork => 
                artwork.title.toLowerCase().includes(searchTerm) ||
                artwork.description.toLowerCase().includes(searchTerm) ||
                artwork.category.toLowerCase().includes(searchTerm)
            );
            
            renderGallery();
        }

        // Modal functions
        function openModal(artwork) {
            currentArtwork = artwork;
            const modal = document.getElementById('artworkModal');
            const modalContent = document.getElementById('artworkModalContent');
            if (artwork.category === 'commissioni' && artwork.title === 'Come Funziona') {
                // Nuovo slider step-by-step mobile-first
                const steps = [
                  {
                    icon: '💡',
                    image: 'images/step1.png',
                    title: 'Contattami con la tua idea',
                    desc: 'Dimmi cosa hai in mente, condividi la tua visione creativa. Sarò felice di ascoltare ogni dettaglio per capire esattamente cosa desideri.'
                  },
                  {
                    icon: '🎯',
                    image: 'images/step2.png',
                    title: 'Discutiamo dettagli, colori e dimensioni',
                    desc: 'Definiamo insieme tutti gli aspetti del progetto: colori, dimensioni, stile e ogni dettaglio tecnico per essere sicuri di creare quello che vuoi.'
                  },
                  {
                    icon: '📋',
                    image: 'images/step3.png',
                    title: 'Ti fornisco un preventivo',
                    desc: 'Ricevi un preventivo chiaro e dettagliato, basato sulla complessità e dimensioni dell\'opera. Nessuna sorpresa, solo trasparenza.'
                  },
                  {
                    icon: '🎨',
                    image: 'images/step4.png',
                    title: 'Preparo la tela e inizio gli schizzi',
                    desc: 'Comincio il lavoro vero e proprio: preparo accuratamente la tela e realizzo i primi schizzi per definire la composizione.'
                  },
                  {
                    icon: '🖌️',
                    image: 'images/step5.png',
                    title: 'Dipingo il tuo quadro strato dopo strato',
                    desc: 'Realizzo l\'opera con cura e attenzione, lavorando per strati successivi per ottenere la massima qualità e profondità.'
                  },
                  {
                    icon: '🎁',
                    image: 'images/step6.png',
                    title: 'Ricevi il tuo quadro originale pronto da appendere',
                    desc: 'L\'opera finita ti viene consegnata completamente pronta per essere esposta, firmata e pronta ad abbellire i tuoi spazi.'
                  }
                ];
                let currentStep = 0;
                let animating = false;
                let modalBgBlur = null;
                function setModalBgBlur(imgUrl) {
                  const modalContent = document.getElementById('artworkModalContent');
                  if (!modalContent) return;
                  // Rimuovi eventuale vecchio sfondo
                  const oldBg = modalContent.querySelector('#cf-modal-blur-bg');
                  if (oldBg) oldBg.remove();
                  // Crea nuovo sfondo
                  const modalBgBlur = document.createElement('div');
                  modalBgBlur.id = 'cf-modal-blur-bg';
                  modalBgBlur.style.position = 'absolute';
                  modalBgBlur.style.inset = '0';
                  modalBgBlur.style.zIndex = '1';
                  modalBgBlur.style.pointerEvents = 'none';
                  modalBgBlur.style.background = `url('${imgUrl}') center center/cover no-repeat`;
                  modalBgBlur.style.filter = 'blur(18px) brightness(0.5)';
                  modalBgBlur.style.transition = 'background 0.3s';
                  modalBgBlur.style.borderRadius = '32px';
                  modalContent.prepend(modalBgBlur);
                }
                function removeModalBgBlur() {
                  const modalContent = document.getElementById('artworkModalContent');
                  if (!modalContent) return;
                  const oldBg = modalContent.querySelector('#cf-modal-blur-bg');
                  if (oldBg) oldBg.remove();
                }
                function renderStep(direction) {
                  if (animating) return;
                  animating = true;
                  const prev = modalContent.querySelector('.cf-step-card');
                  const animOut = direction === 'left' ? 'cf-slide-left-out' : direction === 'right' ? 'cf-slide-right-out' : '';
                  const animIn = direction === 'left' ? 'cf-slide-left-in' : direction === 'right' ? 'cf-slide-right-in' : '';
                  if (prev && animOut) {
                    prev.classList.add(animOut);
                    setTimeout(() => updateStep(animIn), 220);
                  } else {
                    updateStep(animIn);
                  }
                  setModalBgBlur('images/' + steps[currentStep].image.split('/').pop());
                }
                function updateStep(animIn) {
                  modalContent.innerHTML = `
                    <style>
                      .cf-modal-blur-bg {
                        position: absolute;
                        inset: 0;
                        z-index: 1;
                        pointer-events: none;
                        filter: blur(18px) brightness(0.5);
                        transition: background 0.3s;
                        border-radius: 32px;
                      }
                      @media (max-width: 600px) {
                        .cf-modal-blur-bg { filter: blur(12px) brightness(0.5); border-radius: 0; }
                      }
                      .cf-modal-neon { position: relative; z-index: 1002 !important; background: transparent !important; }
                      .cf-modal-slider, .cf-step-card.step-bg, .cf-step-card.step-bg * { position: relative; z-index: 2; }
                    </style>
                    <div class="cf-modal-blur-bg"></div>
                    <div class="cf-modal-neon">
                      <div class="modal-header" style="background:none;padding:0;text-align:right;min-height:0;height:0;">
                        <button class="close-btn" id="cfModalCloseBtn">&times;</button>
                      </div>
                      <div class="cf-modal-slider">
                        <div class="cf-step-card step-bg ${animIn||''}">
                          <img class="cf-step-bg-img" src="${steps[currentStep].image}" alt="Step ${currentStep+1}" />
                          <div class="cf-step-bg-overlay"></div>
                          <div class="cf-step-content">
                            <div class="cf-step-title">${steps[currentStep].title}</div>
                            <div class="cf-step-desc">${steps[currentStep].desc}</div>
                          </div>
                        </div>
                        <div class="cf-slider-nav">
                          <button class="cf-slider-btn" id="cfPrevBtn" ${currentStep===0?'disabled':''}>&larr;</button>
                          <div style="font-size:1rem;color:#fff;">Step ${currentStep+1} / ${steps.length}</div>
                          <button class="cf-slider-btn" id="cfNextBtn" ${currentStep===steps.length-1?'disabled':''}>&rarr;</button>
                        </div>
                        <div class="cf-progress-dots">
                          ${steps.map((s,i)=>`<div class="cf-dot${i===currentStep?' active':''}${i<currentStep?' completed':''}" data-step="${i}" title="${s.title}"></div>`).join('')}
                        </div>
                      </div>
                      <button class="cf-cta-sticky" id="cfCtaBtn">${currentStep<steps.length-1?'Vai al prossimo':'Richiedi Questo Servizio'}</button>
                    </div>
                    `;
                    // Forzo il click della X a chiudere sempre il modal
                    document.getElementById('cfModalCloseBtn').onclick = function() {
                      closeModal();
                    };
                    // Aggiorna il background-image via JS
                    const blurBg = modalContent.querySelector('.cf-modal-blur-bg');
                    if (blurBg) {
                      blurBg.style.background = `url('images/${steps[currentStep].image.split('/').pop()}') center center/cover no-repeat`;
                    }
                    setTimeout(()=>{
                      document.getElementById('cfPrevBtn').onclick = ()=>{ if(currentStep>0){ currentStep--; renderStep('left'); } };
                      document.getElementById('cfNextBtn').onclick = ()=>{ if(currentStep<steps.length-1){ currentStep++; renderStep('right'); } };
                      // Dots cliccabili/tappable
                      modalContent.querySelectorAll('.cf-dot').forEach(dot=>{
                        dot.onclick = ()=>{ const step = parseInt(dot.getAttribute('data-step')); if(step!==currentStep){ const dir = step>currentStep?'right':'left'; currentStep=step; renderStep(dir); } };
                        // Tooltip desktop
                        dot.onmouseenter = (e)=>{ if(window.innerWidth>700){
                          const tip = document.createElement('div');
                          tip.className = 'cf-tooltip';
                          tip.textContent = dot.title;
                          tip.style.position = 'fixed';
                          tip.style.left = (e.clientX+10)+'px';
                          tip.style.top = (e.clientY-30)+'px';
                          tip.style.background = '#222';
                          tip.style.color = '#fff';
                          tip.style.padding = '7px 16px';
                          tip.style.borderRadius = '8px';
                          tip.style.fontSize = '1rem';
                          tip.style.zIndex = 99999;
                          tip.style.pointerEvents = 'none';
                          tip.id = 'cf-tooltip';
                          document.body.appendChild(tip);
                        }};
                        dot.onmouseleave = ()=>{ const tip=document.getElementById('cf-tooltip'); if(tip) tip.remove(); };
                      });
                      // Swipe support
                      let startX=null, startY=null;
                      const slider = modalContent.querySelector('.cf-modal-slider');
                      slider.addEventListener('touchstart',e=>{if(e.touches.length===1){startX=e.touches[0].clientX;startY=e.touches[0].clientY;}});
                      slider.addEventListener('touchend',e=>{
                        if(startX!==null&&startY!==null){
                          let dx=e.changedTouches[0].clientX-startX;
                          let dy=e.changedTouches[0].clientY-startY;
                          if(Math.abs(dx)>40&&Math.abs(dx)>Math.abs(dy)){
                            if(dx>0&&currentStep>0){currentStep--;renderStep('left');}else if(dx<0&&currentStep<steps.length-1){currentStep++;renderStep('right');}
                          } else if(dy>60) { closeModal(); } // Pull to refresh: swipe down chiude
                          startX=null;startY=null;
                        }
                      });
                      // Keyboard navigation
                      document.onkeydown = function(e) {
                        if (modal.style.display !== 'block') return;
                        if (e.key === 'ArrowLeft' && currentStep>0) { currentStep--; renderStep('left'); }
                        else if (e.key === 'ArrowRight' && currentStep<steps.length-1) { currentStep++; renderStep('right'); }
                        else if (e.key === 'Escape') { closeModal(); }
                      };
                      // CTA sticky: testo dinamico e azione
                      document.getElementById('cfCtaBtn').onclick = function() {
                        if(currentStep<steps.length-1) { currentStep++; renderStep('right'); }
                        else { contactForCommission(); }
                      };
                      // Bottone Torna alla Home
                      document.getElementById('cfHomeBtn').onclick = function() {
                        closeModal();
                        window.scrollTo({top:0,behavior:'smooth'});
                      };
                    },50);
                    setTimeout(()=>{animating=false;},240);
                    removeModalBgBlur();
                  }
                  renderStep();
                  modal.style.display = 'block';
                  document.body.style.overflow = 'hidden';
                  return;
              }
              modalImage.innerHTML = `<img src="images/${artwork.image}" alt="${artwork.title}">`;
              modalTitle.textContent = artwork.title;
              modalCategory.textContent = getCategoryName(artwork.category);
              modalDescription.textContent = artwork.description;
              modalPrice.textContent = artwork.price;
              if (artwork.category === 'venduto' && artwork.soldDate) {
                  modalDescription.textContent += `\n\nVenduto nel ${artwork.soldDate}`;
              }
              if (artwork.category === 'work-in-progress') {
                  if (artwork.progress) {
                      modalDescription.textContent += `\n\nStato: ${artwork.progress}`;
                  }
                  if (artwork.estimatedTime) {
                      modalDescription.textContent += `\nTempo stimato: ${artwork.estimatedTime}`;
                  }
              }
              if (artwork.dimensions && artwork.technique) {
                  modalDescription.textContent += `\n\nDimensioni: ${artwork.dimensions}\nTecnica: ${artwork.technique}`;
              }
              if (artwork.category === 'venduto') {
                  contactBtn.textContent = 'Informazioni su Quest\'Opera';
              } else if (artwork.category === 'work-in-progress') {
                  contactBtn.textContent = artwork.isReserved ? 'Opera già Commissionata' : 'Prenota Quest\'Opera';
              } else if (artwork.category === 'chi-sono') {
                  contactBtn.textContent = 'Contattami per Saperne di Più';
              } else if (artwork.category === 'commissioni') {
                  contactBtn.textContent = 'Richiedi Questo Servizio';
              } else {
                  contactBtn.textContent = 'Contattami per Acquistare';
              }
              modal.style.display = 'block';
              document.body.style.overflow = 'hidden';
          }

        function closeModal() {
            const modal = document.getElementById('artworkModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            currentArtwork = null;
            removeModalBgBlur();
        }

        function contactForArtwork() {
            if (!currentArtwork) return;
            
            let message;
            if (currentArtwork.category === 'venduto') {
                message = `Ciao! Vorrei avere informazioni sull'opera "${currentArtwork.title}" che hai realizzato. Mi interesserebbe saperne di più o eventualmente commissioni simili.`;
            } else if (currentArtwork.category === 'work-in-progress') {
                if (currentArtwork.isReserved) {
                    message = `Ciao! Ho visto l'opera "${currentArtwork.title}" nei tuoi work in progress. Mi interesserebbe sapere di più sui tuoi lavori o commissioni simili.`;
                } else {
                    message = `Ciao! Sono interessato a prenotare l'opera "${currentArtwork.title}" che stai realizzando (${currentArtwork.price}). Potresti darmi maggiori informazioni?`;
                }
            } else if (currentArtwork.category === 'chi-sono') {
                message = `Ciao! Ho letto le informazioni su "${currentArtwork.title}" nella tua galleria. Mi piacerebbe saperne di più su di te e sui tuoi lavori!`;
            } else if (currentArtwork.category === 'commissioni') {
                message = `Ciao! Sono interessato al servizio "${currentArtwork.title}". Potresti darmi maggiori informazioni sui tempi e costi?`;
            } else {
                message = `Ciao! Sono interessato all'opera "${currentArtwork.title}" (${currentArtwork.price}). Potresti darmi maggiori informazioni?`;
            }
            
            const whatsappUrl = `https://wa.me/393519070827?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // About Modal functions
        function openAboutModal() {
            const modal = document.getElementById('aboutModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeAboutModal() {
            const modal = document.getElementById('aboutModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Commissions Modal functions
        function openCommissionsModal() {
            const modal = document.getElementById('commissionsModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeCommissionsModal() {
            const modal = document.getElementById('commissionsModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function contactForCommission() {
            const message = `Ciao! Sono interessato a richiedere un quadro personalizzato su tela. Potresti darmi maggiori informazioni?`;
            const whatsappUrl = `https://wa.me/393519070827?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Work in Progress Modal functions
        function openWorkInProgressModal() {
            const modal = document.getElementById('workInProgressModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeWorkInProgressModal() {
            const modal = document.getElementById('workInProgressModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function openWorkModal(workId) {
            const works = {
                1: {
                    title: "Simbiosi",
                    description: "Tu il mio respiro, io il tuo battito, la mia vita esiste solo quando ci tocchiamo. Un'opera che esplora l'interconnessione tra anime gemelle attraverso colori delicati e forme fluide.",
                    status: "85% completato",
                    price: "€ 320,00",
                    dimensions: "70x50cm",
                    technique: "Acrilici su tela",
                    estimatedTime: "3-4 giorni",
                    gradient: "linear-gradient(45deg, #ff9a9e, #fecfef)"
                },
                2: {
                    title: "Oceano Tempestoso",
                    description: "Un paesaggio marino dinamico con onde spumeggianti e un cielo drammatico. Sto lavorando sui dettagli delle onde e sui riflessi della luce per catturare l'energia del mare in tempesta.",
                    status: "60% completato",
                    price: "€ 280,00",
                    dimensions: "60x80cm",
                    technique: "Acrilici su tela",
                    estimatedTime: "1-2 settimane",
                    gradient: "linear-gradient(45deg, #4facfe, #00f2fe)"
                },
                3: {
                    title: "Skyline Notturno",
                    description: "Una vista notturna di una città moderna con luci colorate e riflessi sui grattacieli. Quest'opera è una commissione privata attualmente in fase di sviluppo dello sfondo.",
                    status: "Commissione riservata",
                    price: "Riservato",
                    dimensions: "50x70cm",
                    technique: "Acrilici su tela",
                    estimatedTime: "2-3 settimane",
                    gradient: "linear-gradient(45deg, #434343, #000000)"
                },
                4: {
                    title: "Ritratto Astratto",
                    description: "Un esperimento con volti stilizzati e colori vivaci. Sto esplorando nuove tecniche per rappresentare l'essenza umana attraverso forme geometriche e pennellate espressive.",
                    status: "30% completato",
                    price: "€ 250,00",
                    dimensions: "40x60cm",
                    technique: "Mista su tela",
                    estimatedTime: "2-3 settimane",
                    gradient: "linear-gradient(45deg, #667eea, #764ba2)"
                },
                5: {
                    title: "Galassia Infinita",
                    description: "Un viaggio attraverso l'universo rappresentato con colori cosmici e stelle scintillanti. Quasi completata, mancano solo gli ultimi dettagli stellari e le finiture luminose.",
                    status: "95% completato",
                    price: "€ 380,00",
                    dimensions: "80x60cm",
                    technique: "Acrilici su tela",
                    estimatedTime: "2-3 giorni",
                    gradient: "linear-gradient(45deg, #a8edea, #fed6e3)"
                },
                6: {
                    title: "Energia Cosmica",
                    description: "Un nuovo progetto che esplora l'energia che permea l'universo. Attualmente in fase di sketch e studio dei colori, rappresenterà il flusso energetico attraverso forme dinamiche.",
                    status: "Fase di sketch",
                    price: "€ 200,00",
                    dimensions: "50x50cm",
                    technique: "Acrilici su tela",
                    estimatedTime: "3-4 settimane",
                    gradient: "linear-gradient(45deg, #fa709a, #fee140)"
                }
            };

            const work = works[workId];
            if (!work) return;

            // Usa il modal principale per mostrare i dettagli dell'opera in corso
            const modal = document.getElementById('artworkModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalTitle');
            const modalCategory = document.getElementById('modalCategory');
            const modalDescription = document.getElementById('modalDescription');
            const modalPrice = document.getElementById('modalPrice');
            const contactBtn = document.getElementById('contactBtn');
            
            modalImage.style.background = work.gradient;
            modalImage.innerHTML = `🎨 ${work.title}`;
            
            modalTitle.textContent = work.title;
            modalCategory.textContent = "WORK IN PROGRESS";
            modalDescription.textContent = `${work.description}\n\nStato: ${work.status}\nDimensioni: ${work.dimensions}\nTecnica: ${work.technique}\nTempo stimato: ${work.estimatedTime}`;
            modalPrice.textContent = work.price;
            
            contactBtn.textContent = work.price === "Riservato" ? 'Opera già Commissionata' : 'Prenota Quest\'Opera';
            
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // Lightbox fullscreen
        function openLightbox(artwork, startIndex) {
            const lightbox = document.getElementById('artworkLightbox');
            const lightboxContent = document.getElementById('lightboxContent');
            const closeBtn = document.getElementById('closeLightboxBtn');
            closeBtn.onclick = closeLightbox;
            closeBtn.style.display = 'flex';
            let currentImg = startIndex || 0;
            let zoom = 1, panX = 0, panY = 0, isPanning = false, startX = 0, startY = 0;
            function renderLightbox() {
                let html = `<div id='slider' style='position:relative;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;user-select:none;overflow:hidden;'>`;
                html += `<img id='sliderImg' src='images/${artwork.images[currentImg]}' alt='' style='max-width:100vw;max-height:100vh;object-fit:contain;transition:opacity 0.3s, transform 0.2s;transform: scale(${zoom}) translate(${panX}px,${panY}px); cursor:${zoom>1?'grab':'pointer'};'>`;
                html += `<div id='sliderIndicators' style='position:absolute;bottom:20px;left:50%;transform:translateX(-50%);display:flex;gap:8px;'>`;
                for(let i=0;i<artwork.images.length;i++) {
                    html += `<span class='slider-dot' style='width:12px;height:12px;border-radius:50%;background:${i===currentImg?'#9d4edd':'#fff'};opacity:${i===currentImg?'1':'0.5'};display:inline-block;transition:background 0.2s;'></span>`;
                }
                html += `</div>`;
                html += `<div id='sliderCounter' style='position:absolute;top:20px;right:30px;background:rgba(0,0,0,0.5);color:#fff;padding:5px 14px;border-radius:14px;font-size:1.1rem;'>${currentImg+1}/${artwork.images.length}</div>`;
                html += `</div>`;
                lightboxContent.innerHTML = html;
            }
            renderLightbox();
            // Click sui lati per cambiare immagine solo se non zoomato
            lightboxContent.onclick = function(e) {
                if (zoom > 1) return;
                const rect = lightboxContent.getBoundingClientRect();
                const x = e.clientX - rect.left;
                if (x < rect.width/2) {
                    currentImg = (currentImg - 1 + artwork.images.length) % artwork.images.length;
                } else {
                    currentImg = (currentImg + 1) % artwork.images.length;
                }
                zoom = 1; panX = 0; panY = 0;
                renderLightbox();
            };
            // Pinch-to-zoom, pan, scroll zoom, drag pan (come nel modal)
            let touchStartX = null, touchStartY = null, pinchStartDist = null, pinchStartZoom = 1;
            lightboxContent.ontouchstart = function(e) {
                if (e.touches.length === 1) {
                    touchStartX = e.touches[0].clientX;
                    touchStartY = e.touches[0].clientY;
                } else if (e.touches.length === 2) {
                    pinchStartDist = Math.hypot(
                        e.touches[0].clientX - e.touches[1].clientX,
                        e.touches[0].clientY - e.touches[1].clientY
                    );
                    pinchStartZoom = zoom;
                }
            };
            lightboxContent.ontouchmove = function(e) {
                if (e.touches.length === 2 && pinchStartDist) {
                    const dist = Math.hypot(
                        e.touches[0].clientX - e.touches[1].clientX,
                        e.touches[0].clientY - e.touches[1].clientY
                    );
                    zoom = Math.max(1, Math.min(4, pinchStartZoom * dist / pinchStartDist));
                    renderLightbox();
                } else if (e.touches.length === 1 && zoom > 1 && touchStartX !== null && touchStartY !== null) {
                    const dx = e.touches[0].clientX - touchStartX;
                    const dy = e.touches[0].clientY - touchStartY;
                    panX += dx;
                    panY += dy;
                    touchStartX = e.touches[0].clientX;
                    touchStartY = e.touches[0].clientY;
                    renderLightbox();
                }
            };
            lightboxContent.ontouchend = function(e) {
                if (pinchStartDist) { pinchStartDist = null; }
                if (touchStartX !== null && touchStartY !== null && zoom === 1 && e.changedTouches.length === 1) {
                    const touchEndX = e.changedTouches[0].clientX;
                    if (touchEndX - touchStartX > 40) {
                        currentImg = (currentImg - 1 + artwork.images.length) % artwork.images.length;
                        renderLightbox();
                    } else if (touchStartX - touchEndX > 40) {
                        currentImg = (currentImg + 1) % artwork.images.length;
                        renderLightbox();
                    }
                }
                touchStartX = null; touchStartY = null;
            };
            lightboxContent.onwheel = function(e) {
                e.preventDefault();
                if (e.ctrlKey) return;
                const delta = e.deltaY < 0 ? 0.1 : -0.1;
                zoom = Math.max(1, Math.min(4, zoom + delta));
                renderLightbox();
            };
            lightboxContent.onmousedown = function(e) {
                if (zoom === 1) return;
                isPanning = true;
                startX = e.clientX;
                startY = e.clientY;
                lightboxContent.style.cursor = 'grabbing';
            };
            lightboxContent.onmousemove = function(e) {
                if (!isPanning) return;
                panX += e.clientX - startX;
                panY += e.clientY - startY;
                startX = e.clientX;
                startY = e.clientY;
                renderLightbox();
            };
            lightboxContent.onmouseup = function() {
                isPanning = false;
                lightboxContent.style.cursor = zoom > 1 ? 'grab' : 'pointer';
            };
            lightboxContent.onmouseleave = function() {
                isPanning = false;
                lightboxContent.style.cursor = zoom > 1 ? 'grab' : 'pointer';
            };
            document.onkeydown = function(e) {
                if (lightbox.style.display !== 'block') return;
                if (zoom > 1) return;
                if (e.key === 'ArrowLeft') {
                    currentImg = (currentImg - 1 + artwork.images.length) % artwork.images.length;
                    renderLightbox();
                } else if (e.key === 'ArrowRight') {
                    currentImg = (currentImg + 1) % artwork.images.length;
                    renderLightbox();
                } else if (e.key === 'Escape') {
                    closeLightbox();
                }
            };
            // Chiudi lightbox su click fuori
            lightbox.onclick = function(e) {
                if (e.target === lightbox) closeLightbox();
            };
            lightbox.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        function closeLightbox() {
            const lightbox = document.getElementById('artworkLightbox');
            const closeBtn = document.getElementById('closeLightboxBtn');
            lightbox.style.display = 'none';
            closeBtn.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            loadArtworks();
            
            // Navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    if (this.getAttribute('href') === '#contatti') return;
                    if (this.onclick) return; // Skip items with onclick handlers
                    
                    e.preventDefault();
                    
                    // Update active nav item
                    document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter by category
                    const category = this.dataset.category;
                    if (category) {
                        filterByCategory(category);
                    }
                });
            });
            
            // Price filters
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const priceRange = this.dataset.price;
                    filterByPrice(priceRange);
                });
            });
            
            // Search
            document.getElementById('searchInput').addEventListener('input', searchArtworks);
            
            // Close modal on outside click
            document.getElementById('artworkModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
            
            // Close about modal on outside click
            document.getElementById('aboutModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeAboutModal();
                }
            });

            // Close commissions modal on outside click
            document.getElementById('commissionsModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeCommissionsModal();
                }
            });

            // Close work in progress modal on outside click
            document.getElementById('workInProgressModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeWorkInProgressModal();
                }
            });
            
            // Close modal with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                    closeAboutModal();
                    closeCommissionsModal();
                    closeWorkInProgressModal();
                }
            });
            
            // Smooth scroll for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        e.preventDefault();
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });

        // Header scroll effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('.header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(0, 0, 0, 0.98)';
            } else {
                header.style.background = 'rgba(0, 0, 0, 0.95)';
            }
        });

        // Navbar auto-hide on scroll
        // let lastScrollY = window.scrollY;
        // let ticking = false;
        // let navbarHidden = false;
        // function handleNavbarAutoHide() {
        //     const header = document.querySelector('.header');
        //     const currentScroll = window.scrollY;
        //     if (currentScroll > lastScrollY && currentScroll > 40) {
        //         // Scroll giù: nascondi
        //         header.classList.add('hide-navbar');
        //     } else if (currentScroll < lastScrollY || currentScroll <= 0) {
        //         // Scroll su o sei in cima: mostra
        //         header.classList.remove('hide-navbar');
        //     }
        //     lastScrollY = currentScroll;
        //     ticking = false;
        // }
        // window.addEventListener('scroll', function() {
        //     if (!ticking) {
        //         window.requestAnimationFrame(handleNavbarAutoHide);
        //         ticking = true;
        //     }
        // });
        // Inizializza stato
        // document.addEventListener('DOMContentLoaded', function() {
        //     // RIMOSSO: document.querySelector('.header').classList.add('show-navbar');
        // });
        // --- NUOVA LOGICA A SOGLIA ---
        let navbarVisible = true;
        const threshold = 100;
        window.addEventListener('scroll', function() {
            const header = document.querySelector('.header');
            const currentScroll = window.scrollY;
            if (navbarVisible && currentScroll > threshold) {
                header.classList.add('hide-navbar');
                navbarVisible = false;
            } else if (!navbarVisible && currentScroll <= threshold) {
                header.classList.remove('hide-navbar');
                navbarVisible = true;
            }
        });
    </script>
</body>
</html>
